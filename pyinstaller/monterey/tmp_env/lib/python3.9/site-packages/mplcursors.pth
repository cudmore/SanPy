import os; exec('import os\n\n\nif os.environ.get("MPLCURSORS"):\n    # We cannot directly import matplotlib if `MPLCURSORS` is set because\n    # `sys.path` is not correctly set yet.\n    # The loading of `matplotlib.figure` does not go through the path entry\n    # finder because it is a submodule, so we use a metapath finder instead.\n\n    from importlib.machinery import PathFinder\n    import sys\n\n    class MplcursorsMetaPathFinder(PathFinder):\n        def find_spec(self, fullname, path=None, target=None):\n            spec = super().find_spec(fullname, path, target)\n            if fullname == "matplotlib.figure":\n                def exec_module(module):\n                    type(spec.loader).exec_module(spec.loader, module)\n                    # The pth file does not get properly uninstalled from a\n                    # develop install.  See pypa/pip#4176.\n                    try:\n                        import mplcursors\n                    except ImportError:\n                        return\n                    import functools\n                    import json\n                    import weakref\n                    # Ensure that when the cursor is removed(), or gets GC\'d\n                    # because its referents artists are GC\'d, the entry also\n                    # disappears.\n                    cursors = weakref.WeakValueDictionary()\n                    options = json.loads(os.environ["MPLCURSORS"])\n                    @functools.wraps(module.Figure.draw)\n                    def wrapper(self, *args, **kwargs):\n                        rv = wrapper.__wrapped__(self, *args, **kwargs)\n                        if self not in cursors:\n                            cursor = mplcursors.cursor(self, **options)\n                            if cursor.artists:\n                                cursors[self] = cursor\n                            else:\n                                # No artist yet; skip possible init code.\n                                cursor.remove()\n                        return rv\n                    module.Figure.draw = wrapper\n                spec.loader.exec_module = exec_module\n                sys.meta_path.remove(self)\n            return spec\n\n    sys.meta_path.insert(0, MplcursorsMetaPathFinder())\n')