
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Current Clamp Analysis For Cardiac Myocytes">
      
      
        <meta name="author" content="Robert H Cudmore">
      
      
      
        <link rel="prev" href="../../userAnalysis/baseUserAnalysis/">
      
      
        <link rel="next" href="../plugins/sanpyPlugin/">
      
      <link rel="icon" href="../../../img/sanpy-transparent.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.8">
    
    
      
        <title>sanp_app - SanPy Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.ded33207.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../../css/style.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#sanpy.interface.sanpy_app" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="SanPy Documentation" class="md-header__button md-logo" aria-label="SanPy Documentation" data-md-component="logo">
      
  <img src="../../../img/sanpy-transparent.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            SanPy Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              sanp_app
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/cudmore/sanpy" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    SanPy Repository
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="SanPy Documentation" class="md-nav__button md-logo" aria-label="SanPy Documentation" data-md-component="logo">
      
  <img src="../../../img/sanpy-transparent.png" alt="logo">

    </a>
    SanPy Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/cudmore/sanpy" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    SanPy Repository
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Introducing SanPy
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../download/" class="md-nav__link">
        Download
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../desktop-application/" class="md-nav__link">
        Desktop Application
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../plugins/" class="md-nav__link">
        Plugins
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../install/" class="md-nav__link">
        Install
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../scripting/" class="md-nav__link">
        Using the API
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" checked>
      
      
      
        <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
          API
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../writing-a-file-loader/" class="md-nav__link">
        Writing A File Loader
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../writing-a-plugin/" class="md-nav__link">
        Writing A Plugin
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../writing-new-analysis/" class="md-nav__link">
        Writing New Analysis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bAnalysis/" class="md-nav__link">
        bAnalysis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bAnalysisResults/" class="md-nav__link">
        bAnalysisResults
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../epochTable/" class="md-nav__link">
        epochTable
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../analysisPlot/" class="md-nav__link">
        analysisPlot
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../analysisDir/" class="md-nav__link">
        analysisDir
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bExport/" class="md-nav__link">
        bExport
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bDetection/" class="md-nav__link">
        bDetection
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bAnalysisUtil/" class="md-nav__link">
        bAnalysisUtil
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_13" >
      
      
      
        <label class="md-nav__link" for="__nav_7_13" id="__nav_7_13_label" tabindex="0">
          fileLoader
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_13_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_13">
          <span class="md-nav__icon md-icon"></span>
          fileLoader
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../fileloader/fileLoader_base/" class="md-nav__link">
        fileLoader_base
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../fileloader/fileLoader_abf/" class="md-nav__link">
        fileLoader_abf
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../fileloader/fileLoader_csv/" class="md-nav__link">
        fileLoader_csv
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../userAnalysis/baseUserAnalysis/" class="md-nav__link">
        baseUserAnalysis
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_15" checked>
      
      
      
        <label class="md-nav__link" for="__nav_7_15" id="__nav_7_15_label" tabindex="0">
          interface
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_15_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_7_15">
          <span class="md-nav__icon md-icon"></span>
          interface
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          sanp_app
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        sanp_app
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#sanpy.interface.sanpy_app" class="md-nav__link">
    sanpy.interface.sanpy_app
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sanpy.interface.sanpy_app-classes" class="md-nav__link">
    Classes
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sanpy.interface.sanpy_app.SanPyWindow" class="md-nav__link">
    SanPyWindow
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sanpy.interface.sanpy_app-functions" class="md-nav__link">
    Functions
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sanpy.interface.sanpy_app.main" class="md-nav__link">
    main()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_15_2" >
      
      
      
        <label class="md-nav__link" for="__nav_7_15_2" id="__nav_7_15_2_label" tabindex="0">
          plugins
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_7_15_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7_15_2">
          <span class="md-nav__icon md-icon"></span>
          plugins
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../plugins/sanpyPlugin/" class="md-nav__link">
        sanpyPlugin
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../methods/" class="md-nav__link">
        Methods
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../web-application/" class="md-nav__link">
        Web Application
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../open-source/" class="md-nav__link">
        Open Source
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../about/" class="md-nav__link">
        About SanPy
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#sanpy.interface.sanpy_app" class="md-nav__link">
    sanpy.interface.sanpy_app
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sanpy.interface.sanpy_app-classes" class="md-nav__link">
    Classes
  </a>
  
    <nav class="md-nav" aria-label="Classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sanpy.interface.sanpy_app.SanPyWindow" class="md-nav__link">
    SanPyWindow
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sanpy.interface.sanpy_app-functions" class="md-nav__link">
    Functions
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sanpy.interface.sanpy_app.main" class="md-nav__link">
    main()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>sanp_app</h1>

<div class="doc doc-object doc-module">


<a id="sanpy.interface.sanpy_app"></a>
  <div class="doc doc-contents first">

  

  <div class="doc doc-children">






<h2 id="sanpy.interface.sanpy_app-classes">Classes<a href="#sanpy.interface.sanpy_app-classes" class="headerlink" title="Permanent link">¤</a></h2>

<div class="doc doc-object doc-class">



<h3 id="sanpy.interface.sanpy_app.SanPyWindow" class="doc doc-heading">
        <code>SanPyWindow</code>


<a href="#sanpy.interface.sanpy_app.SanPyWindow" class="headerlink" title="Permanent link">¤</a></h3>


  <div class="doc doc-contents ">
      <p class="doc doc-class-bases">
        Bases: <code><span title="qtpy.QtWidgets">QtWidgets</span>.<span title="qtpy.QtWidgets.QMainWindow">QMainWindow</span></code></p>



        <details class="quote">
          <summary>Source code in <code>/Users/cudmore/Sites/SanPy/sanpy/interface/sanpy_app.py</code></summary>
          <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">  55</span>
<span class="normal">  56</span>
<span class="normal">  57</span>
<span class="normal">  58</span>
<span class="normal">  59</span>
<span class="normal">  60</span>
<span class="normal">  61</span>
<span class="normal">  62</span>
<span class="normal">  63</span>
<span class="normal">  64</span>
<span class="normal">  65</span>
<span class="normal">  66</span>
<span class="normal">  67</span>
<span class="normal">  68</span>
<span class="normal">  69</span>
<span class="normal">  70</span>
<span class="normal">  71</span>
<span class="normal">  72</span>
<span class="normal">  73</span>
<span class="normal">  74</span>
<span class="normal">  75</span>
<span class="normal">  76</span>
<span class="normal">  77</span>
<span class="normal">  78</span>
<span class="normal">  79</span>
<span class="normal">  80</span>
<span class="normal">  81</span>
<span class="normal">  82</span>
<span class="normal">  83</span>
<span class="normal">  84</span>
<span class="normal">  85</span>
<span class="normal">  86</span>
<span class="normal">  87</span>
<span class="normal">  88</span>
<span class="normal">  89</span>
<span class="normal">  90</span>
<span class="normal">  91</span>
<span class="normal">  92</span>
<span class="normal">  93</span>
<span class="normal">  94</span>
<span class="normal">  95</span>
<span class="normal">  96</span>
<span class="normal">  97</span>
<span class="normal">  98</span>
<span class="normal">  99</span>
<span class="normal"> 100</span>
<span class="normal"> 101</span>
<span class="normal"> 102</span>
<span class="normal"> 103</span>
<span class="normal"> 104</span>
<span class="normal"> 105</span>
<span class="normal"> 106</span>
<span class="normal"> 107</span>
<span class="normal"> 108</span>
<span class="normal"> 109</span>
<span class="normal"> 110</span>
<span class="normal"> 111</span>
<span class="normal"> 112</span>
<span class="normal"> 113</span>
<span class="normal"> 114</span>
<span class="normal"> 115</span>
<span class="normal"> 116</span>
<span class="normal"> 117</span>
<span class="normal"> 118</span>
<span class="normal"> 119</span>
<span class="normal"> 120</span>
<span class="normal"> 121</span>
<span class="normal"> 122</span>
<span class="normal"> 123</span>
<span class="normal"> 124</span>
<span class="normal"> 125</span>
<span class="normal"> 126</span>
<span class="normal"> 127</span>
<span class="normal"> 128</span>
<span class="normal"> 129</span>
<span class="normal"> 130</span>
<span class="normal"> 131</span>
<span class="normal"> 132</span>
<span class="normal"> 133</span>
<span class="normal"> 134</span>
<span class="normal"> 135</span>
<span class="normal"> 136</span>
<span class="normal"> 137</span>
<span class="normal"> 138</span>
<span class="normal"> 139</span>
<span class="normal"> 140</span>
<span class="normal"> 141</span>
<span class="normal"> 142</span>
<span class="normal"> 143</span>
<span class="normal"> 144</span>
<span class="normal"> 145</span>
<span class="normal"> 146</span>
<span class="normal"> 147</span>
<span class="normal"> 148</span>
<span class="normal"> 149</span>
<span class="normal"> 150</span>
<span class="normal"> 151</span>
<span class="normal"> 152</span>
<span class="normal"> 153</span>
<span class="normal"> 154</span>
<span class="normal"> 155</span>
<span class="normal"> 156</span>
<span class="normal"> 157</span>
<span class="normal"> 158</span>
<span class="normal"> 159</span>
<span class="normal"> 160</span>
<span class="normal"> 161</span>
<span class="normal"> 162</span>
<span class="normal"> 163</span>
<span class="normal"> 164</span>
<span class="normal"> 165</span>
<span class="normal"> 166</span>
<span class="normal"> 167</span>
<span class="normal"> 168</span>
<span class="normal"> 169</span>
<span class="normal"> 170</span>
<span class="normal"> 171</span>
<span class="normal"> 172</span>
<span class="normal"> 173</span>
<span class="normal"> 174</span>
<span class="normal"> 175</span>
<span class="normal"> 176</span>
<span class="normal"> 177</span>
<span class="normal"> 178</span>
<span class="normal"> 179</span>
<span class="normal"> 180</span>
<span class="normal"> 181</span>
<span class="normal"> 182</span>
<span class="normal"> 183</span>
<span class="normal"> 184</span>
<span class="normal"> 185</span>
<span class="normal"> 186</span>
<span class="normal"> 187</span>
<span class="normal"> 188</span>
<span class="normal"> 189</span>
<span class="normal"> 190</span>
<span class="normal"> 191</span>
<span class="normal"> 192</span>
<span class="normal"> 193</span>
<span class="normal"> 194</span>
<span class="normal"> 195</span>
<span class="normal"> 196</span>
<span class="normal"> 197</span>
<span class="normal"> 198</span>
<span class="normal"> 199</span>
<span class="normal"> 200</span>
<span class="normal"> 201</span>
<span class="normal"> 202</span>
<span class="normal"> 203</span>
<span class="normal"> 204</span>
<span class="normal"> 205</span>
<span class="normal"> 206</span>
<span class="normal"> 207</span>
<span class="normal"> 208</span>
<span class="normal"> 209</span>
<span class="normal"> 210</span>
<span class="normal"> 211</span>
<span class="normal"> 212</span>
<span class="normal"> 213</span>
<span class="normal"> 214</span>
<span class="normal"> 215</span>
<span class="normal"> 216</span>
<span class="normal"> 217</span>
<span class="normal"> 218</span>
<span class="normal"> 219</span>
<span class="normal"> 220</span>
<span class="normal"> 221</span>
<span class="normal"> 222</span>
<span class="normal"> 223</span>
<span class="normal"> 224</span>
<span class="normal"> 225</span>
<span class="normal"> 226</span>
<span class="normal"> 227</span>
<span class="normal"> 228</span>
<span class="normal"> 229</span>
<span class="normal"> 230</span>
<span class="normal"> 231</span>
<span class="normal"> 232</span>
<span class="normal"> 233</span>
<span class="normal"> 234</span>
<span class="normal"> 235</span>
<span class="normal"> 236</span>
<span class="normal"> 237</span>
<span class="normal"> 238</span>
<span class="normal"> 239</span>
<span class="normal"> 240</span>
<span class="normal"> 241</span>
<span class="normal"> 242</span>
<span class="normal"> 243</span>
<span class="normal"> 244</span>
<span class="normal"> 245</span>
<span class="normal"> 246</span>
<span class="normal"> 247</span>
<span class="normal"> 248</span>
<span class="normal"> 249</span>
<span class="normal"> 250</span>
<span class="normal"> 251</span>
<span class="normal"> 252</span>
<span class="normal"> 253</span>
<span class="normal"> 254</span>
<span class="normal"> 255</span>
<span class="normal"> 256</span>
<span class="normal"> 257</span>
<span class="normal"> 258</span>
<span class="normal"> 259</span>
<span class="normal"> 260</span>
<span class="normal"> 261</span>
<span class="normal"> 262</span>
<span class="normal"> 263</span>
<span class="normal"> 264</span>
<span class="normal"> 265</span>
<span class="normal"> 266</span>
<span class="normal"> 267</span>
<span class="normal"> 268</span>
<span class="normal"> 269</span>
<span class="normal"> 270</span>
<span class="normal"> 271</span>
<span class="normal"> 272</span>
<span class="normal"> 273</span>
<span class="normal"> 274</span>
<span class="normal"> 275</span>
<span class="normal"> 276</span>
<span class="normal"> 277</span>
<span class="normal"> 278</span>
<span class="normal"> 279</span>
<span class="normal"> 280</span>
<span class="normal"> 281</span>
<span class="normal"> 282</span>
<span class="normal"> 283</span>
<span class="normal"> 284</span>
<span class="normal"> 285</span>
<span class="normal"> 286</span>
<span class="normal"> 287</span>
<span class="normal"> 288</span>
<span class="normal"> 289</span>
<span class="normal"> 290</span>
<span class="normal"> 291</span>
<span class="normal"> 292</span>
<span class="normal"> 293</span>
<span class="normal"> 294</span>
<span class="normal"> 295</span>
<span class="normal"> 296</span>
<span class="normal"> 297</span>
<span class="normal"> 298</span>
<span class="normal"> 299</span>
<span class="normal"> 300</span>
<span class="normal"> 301</span>
<span class="normal"> 302</span>
<span class="normal"> 303</span>
<span class="normal"> 304</span>
<span class="normal"> 305</span>
<span class="normal"> 306</span>
<span class="normal"> 307</span>
<span class="normal"> 308</span>
<span class="normal"> 309</span>
<span class="normal"> 310</span>
<span class="normal"> 311</span>
<span class="normal"> 312</span>
<span class="normal"> 313</span>
<span class="normal"> 314</span>
<span class="normal"> 315</span>
<span class="normal"> 316</span>
<span class="normal"> 317</span>
<span class="normal"> 318</span>
<span class="normal"> 319</span>
<span class="normal"> 320</span>
<span class="normal"> 321</span>
<span class="normal"> 322</span>
<span class="normal"> 323</span>
<span class="normal"> 324</span>
<span class="normal"> 325</span>
<span class="normal"> 326</span>
<span class="normal"> 327</span>
<span class="normal"> 328</span>
<span class="normal"> 329</span>
<span class="normal"> 330</span>
<span class="normal"> 331</span>
<span class="normal"> 332</span>
<span class="normal"> 333</span>
<span class="normal"> 334</span>
<span class="normal"> 335</span>
<span class="normal"> 336</span>
<span class="normal"> 337</span>
<span class="normal"> 338</span>
<span class="normal"> 339</span>
<span class="normal"> 340</span>
<span class="normal"> 341</span>
<span class="normal"> 342</span>
<span class="normal"> 343</span>
<span class="normal"> 344</span>
<span class="normal"> 345</span>
<span class="normal"> 346</span>
<span class="normal"> 347</span>
<span class="normal"> 348</span>
<span class="normal"> 349</span>
<span class="normal"> 350</span>
<span class="normal"> 351</span>
<span class="normal"> 352</span>
<span class="normal"> 353</span>
<span class="normal"> 354</span>
<span class="normal"> 355</span>
<span class="normal"> 356</span>
<span class="normal"> 357</span>
<span class="normal"> 358</span>
<span class="normal"> 359</span>
<span class="normal"> 360</span>
<span class="normal"> 361</span>
<span class="normal"> 362</span>
<span class="normal"> 363</span>
<span class="normal"> 364</span>
<span class="normal"> 365</span>
<span class="normal"> 366</span>
<span class="normal"> 367</span>
<span class="normal"> 368</span>
<span class="normal"> 369</span>
<span class="normal"> 370</span>
<span class="normal"> 371</span>
<span class="normal"> 372</span>
<span class="normal"> 373</span>
<span class="normal"> 374</span>
<span class="normal"> 375</span>
<span class="normal"> 376</span>
<span class="normal"> 377</span>
<span class="normal"> 378</span>
<span class="normal"> 379</span>
<span class="normal"> 380</span>
<span class="normal"> 381</span>
<span class="normal"> 382</span>
<span class="normal"> 383</span>
<span class="normal"> 384</span>
<span class="normal"> 385</span>
<span class="normal"> 386</span>
<span class="normal"> 387</span>
<span class="normal"> 388</span>
<span class="normal"> 389</span>
<span class="normal"> 390</span>
<span class="normal"> 391</span>
<span class="normal"> 392</span>
<span class="normal"> 393</span>
<span class="normal"> 394</span>
<span class="normal"> 395</span>
<span class="normal"> 396</span>
<span class="normal"> 397</span>
<span class="normal"> 398</span>
<span class="normal"> 399</span>
<span class="normal"> 400</span>
<span class="normal"> 401</span>
<span class="normal"> 402</span>
<span class="normal"> 403</span>
<span class="normal"> 404</span>
<span class="normal"> 405</span>
<span class="normal"> 406</span>
<span class="normal"> 407</span>
<span class="normal"> 408</span>
<span class="normal"> 409</span>
<span class="normal"> 410</span>
<span class="normal"> 411</span>
<span class="normal"> 412</span>
<span class="normal"> 413</span>
<span class="normal"> 414</span>
<span class="normal"> 415</span>
<span class="normal"> 416</span>
<span class="normal"> 417</span>
<span class="normal"> 418</span>
<span class="normal"> 419</span>
<span class="normal"> 420</span>
<span class="normal"> 421</span>
<span class="normal"> 422</span>
<span class="normal"> 423</span>
<span class="normal"> 424</span>
<span class="normal"> 425</span>
<span class="normal"> 426</span>
<span class="normal"> 427</span>
<span class="normal"> 428</span>
<span class="normal"> 429</span>
<span class="normal"> 430</span>
<span class="normal"> 431</span>
<span class="normal"> 432</span>
<span class="normal"> 433</span>
<span class="normal"> 434</span>
<span class="normal"> 435</span>
<span class="normal"> 436</span>
<span class="normal"> 437</span>
<span class="normal"> 438</span>
<span class="normal"> 439</span>
<span class="normal"> 440</span>
<span class="normal"> 441</span>
<span class="normal"> 442</span>
<span class="normal"> 443</span>
<span class="normal"> 444</span>
<span class="normal"> 445</span>
<span class="normal"> 446</span>
<span class="normal"> 447</span>
<span class="normal"> 448</span>
<span class="normal"> 449</span>
<span class="normal"> 450</span>
<span class="normal"> 451</span>
<span class="normal"> 452</span>
<span class="normal"> 453</span>
<span class="normal"> 454</span>
<span class="normal"> 455</span>
<span class="normal"> 456</span>
<span class="normal"> 457</span>
<span class="normal"> 458</span>
<span class="normal"> 459</span>
<span class="normal"> 460</span>
<span class="normal"> 461</span>
<span class="normal"> 462</span>
<span class="normal"> 463</span>
<span class="normal"> 464</span>
<span class="normal"> 465</span>
<span class="normal"> 466</span>
<span class="normal"> 467</span>
<span class="normal"> 468</span>
<span class="normal"> 469</span>
<span class="normal"> 470</span>
<span class="normal"> 471</span>
<span class="normal"> 472</span>
<span class="normal"> 473</span>
<span class="normal"> 474</span>
<span class="normal"> 475</span>
<span class="normal"> 476</span>
<span class="normal"> 477</span>
<span class="normal"> 478</span>
<span class="normal"> 479</span>
<span class="normal"> 480</span>
<span class="normal"> 481</span>
<span class="normal"> 482</span>
<span class="normal"> 483</span>
<span class="normal"> 484</span>
<span class="normal"> 485</span>
<span class="normal"> 486</span>
<span class="normal"> 487</span>
<span class="normal"> 488</span>
<span class="normal"> 489</span>
<span class="normal"> 490</span>
<span class="normal"> 491</span>
<span class="normal"> 492</span>
<span class="normal"> 493</span>
<span class="normal"> 494</span>
<span class="normal"> 495</span>
<span class="normal"> 496</span>
<span class="normal"> 497</span>
<span class="normal"> 498</span>
<span class="normal"> 499</span>
<span class="normal"> 500</span>
<span class="normal"> 501</span>
<span class="normal"> 502</span>
<span class="normal"> 503</span>
<span class="normal"> 504</span>
<span class="normal"> 505</span>
<span class="normal"> 506</span>
<span class="normal"> 507</span>
<span class="normal"> 508</span>
<span class="normal"> 509</span>
<span class="normal"> 510</span>
<span class="normal"> 511</span>
<span class="normal"> 512</span>
<span class="normal"> 513</span>
<span class="normal"> 514</span>
<span class="normal"> 515</span>
<span class="normal"> 516</span>
<span class="normal"> 517</span>
<span class="normal"> 518</span>
<span class="normal"> 519</span>
<span class="normal"> 520</span>
<span class="normal"> 521</span>
<span class="normal"> 522</span>
<span class="normal"> 523</span>
<span class="normal"> 524</span>
<span class="normal"> 525</span>
<span class="normal"> 526</span>
<span class="normal"> 527</span>
<span class="normal"> 528</span>
<span class="normal"> 529</span>
<span class="normal"> 530</span>
<span class="normal"> 531</span>
<span class="normal"> 532</span>
<span class="normal"> 533</span>
<span class="normal"> 534</span>
<span class="normal"> 535</span>
<span class="normal"> 536</span>
<span class="normal"> 537</span>
<span class="normal"> 538</span>
<span class="normal"> 539</span>
<span class="normal"> 540</span>
<span class="normal"> 541</span>
<span class="normal"> 542</span>
<span class="normal"> 543</span>
<span class="normal"> 544</span>
<span class="normal"> 545</span>
<span class="normal"> 546</span>
<span class="normal"> 547</span>
<span class="normal"> 548</span>
<span class="normal"> 549</span>
<span class="normal"> 550</span>
<span class="normal"> 551</span>
<span class="normal"> 552</span>
<span class="normal"> 553</span>
<span class="normal"> 554</span>
<span class="normal"> 555</span>
<span class="normal"> 556</span>
<span class="normal"> 557</span>
<span class="normal"> 558</span>
<span class="normal"> 559</span>
<span class="normal"> 560</span>
<span class="normal"> 561</span>
<span class="normal"> 562</span>
<span class="normal"> 563</span>
<span class="normal"> 564</span>
<span class="normal"> 565</span>
<span class="normal"> 566</span>
<span class="normal"> 567</span>
<span class="normal"> 568</span>
<span class="normal"> 569</span>
<span class="normal"> 570</span>
<span class="normal"> 571</span>
<span class="normal"> 572</span>
<span class="normal"> 573</span>
<span class="normal"> 574</span>
<span class="normal"> 575</span>
<span class="normal"> 576</span>
<span class="normal"> 577</span>
<span class="normal"> 578</span>
<span class="normal"> 579</span>
<span class="normal"> 580</span>
<span class="normal"> 581</span>
<span class="normal"> 582</span>
<span class="normal"> 583</span>
<span class="normal"> 584</span>
<span class="normal"> 585</span>
<span class="normal"> 586</span>
<span class="normal"> 587</span>
<span class="normal"> 588</span>
<span class="normal"> 589</span>
<span class="normal"> 590</span>
<span class="normal"> 591</span>
<span class="normal"> 592</span>
<span class="normal"> 593</span>
<span class="normal"> 594</span>
<span class="normal"> 595</span>
<span class="normal"> 596</span>
<span class="normal"> 597</span>
<span class="normal"> 598</span>
<span class="normal"> 599</span>
<span class="normal"> 600</span>
<span class="normal"> 601</span>
<span class="normal"> 602</span>
<span class="normal"> 603</span>
<span class="normal"> 604</span>
<span class="normal"> 605</span>
<span class="normal"> 606</span>
<span class="normal"> 607</span>
<span class="normal"> 608</span>
<span class="normal"> 609</span>
<span class="normal"> 610</span>
<span class="normal"> 611</span>
<span class="normal"> 612</span>
<span class="normal"> 613</span>
<span class="normal"> 614</span>
<span class="normal"> 615</span>
<span class="normal"> 616</span>
<span class="normal"> 617</span>
<span class="normal"> 618</span>
<span class="normal"> 619</span>
<span class="normal"> 620</span>
<span class="normal"> 621</span>
<span class="normal"> 622</span>
<span class="normal"> 623</span>
<span class="normal"> 624</span>
<span class="normal"> 625</span>
<span class="normal"> 626</span>
<span class="normal"> 627</span>
<span class="normal"> 628</span>
<span class="normal"> 629</span>
<span class="normal"> 630</span>
<span class="normal"> 631</span>
<span class="normal"> 632</span>
<span class="normal"> 633</span>
<span class="normal"> 634</span>
<span class="normal"> 635</span>
<span class="normal"> 636</span>
<span class="normal"> 637</span>
<span class="normal"> 638</span>
<span class="normal"> 639</span>
<span class="normal"> 640</span>
<span class="normal"> 641</span>
<span class="normal"> 642</span>
<span class="normal"> 643</span>
<span class="normal"> 644</span>
<span class="normal"> 645</span>
<span class="normal"> 646</span>
<span class="normal"> 647</span>
<span class="normal"> 648</span>
<span class="normal"> 649</span>
<span class="normal"> 650</span>
<span class="normal"> 651</span>
<span class="normal"> 652</span>
<span class="normal"> 653</span>
<span class="normal"> 654</span>
<span class="normal"> 655</span>
<span class="normal"> 656</span>
<span class="normal"> 657</span>
<span class="normal"> 658</span>
<span class="normal"> 659</span>
<span class="normal"> 660</span>
<span class="normal"> 661</span>
<span class="normal"> 662</span>
<span class="normal"> 663</span>
<span class="normal"> 664</span>
<span class="normal"> 665</span>
<span class="normal"> 666</span>
<span class="normal"> 667</span>
<span class="normal"> 668</span>
<span class="normal"> 669</span>
<span class="normal"> 670</span>
<span class="normal"> 671</span>
<span class="normal"> 672</span>
<span class="normal"> 673</span>
<span class="normal"> 674</span>
<span class="normal"> 675</span>
<span class="normal"> 676</span>
<span class="normal"> 677</span>
<span class="normal"> 678</span>
<span class="normal"> 679</span>
<span class="normal"> 680</span>
<span class="normal"> 681</span>
<span class="normal"> 682</span>
<span class="normal"> 683</span>
<span class="normal"> 684</span>
<span class="normal"> 685</span>
<span class="normal"> 686</span>
<span class="normal"> 687</span>
<span class="normal"> 688</span>
<span class="normal"> 689</span>
<span class="normal"> 690</span>
<span class="normal"> 691</span>
<span class="normal"> 692</span>
<span class="normal"> 693</span>
<span class="normal"> 694</span>
<span class="normal"> 695</span>
<span class="normal"> 696</span>
<span class="normal"> 697</span>
<span class="normal"> 698</span>
<span class="normal"> 699</span>
<span class="normal"> 700</span>
<span class="normal"> 701</span>
<span class="normal"> 702</span>
<span class="normal"> 703</span>
<span class="normal"> 704</span>
<span class="normal"> 705</span>
<span class="normal"> 706</span>
<span class="normal"> 707</span>
<span class="normal"> 708</span>
<span class="normal"> 709</span>
<span class="normal"> 710</span>
<span class="normal"> 711</span>
<span class="normal"> 712</span>
<span class="normal"> 713</span>
<span class="normal"> 714</span>
<span class="normal"> 715</span>
<span class="normal"> 716</span>
<span class="normal"> 717</span>
<span class="normal"> 718</span>
<span class="normal"> 719</span>
<span class="normal"> 720</span>
<span class="normal"> 721</span>
<span class="normal"> 722</span>
<span class="normal"> 723</span>
<span class="normal"> 724</span>
<span class="normal"> 725</span>
<span class="normal"> 726</span>
<span class="normal"> 727</span>
<span class="normal"> 728</span>
<span class="normal"> 729</span>
<span class="normal"> 730</span>
<span class="normal"> 731</span>
<span class="normal"> 732</span>
<span class="normal"> 733</span>
<span class="normal"> 734</span>
<span class="normal"> 735</span>
<span class="normal"> 736</span>
<span class="normal"> 737</span>
<span class="normal"> 738</span>
<span class="normal"> 739</span>
<span class="normal"> 740</span>
<span class="normal"> 741</span>
<span class="normal"> 742</span>
<span class="normal"> 743</span>
<span class="normal"> 744</span>
<span class="normal"> 745</span>
<span class="normal"> 746</span>
<span class="normal"> 747</span>
<span class="normal"> 748</span>
<span class="normal"> 749</span>
<span class="normal"> 750</span>
<span class="normal"> 751</span>
<span class="normal"> 752</span>
<span class="normal"> 753</span>
<span class="normal"> 754</span>
<span class="normal"> 755</span>
<span class="normal"> 756</span>
<span class="normal"> 757</span>
<span class="normal"> 758</span>
<span class="normal"> 759</span>
<span class="normal"> 760</span>
<span class="normal"> 761</span>
<span class="normal"> 762</span>
<span class="normal"> 763</span>
<span class="normal"> 764</span>
<span class="normal"> 765</span>
<span class="normal"> 766</span>
<span class="normal"> 767</span>
<span class="normal"> 768</span>
<span class="normal"> 769</span>
<span class="normal"> 770</span>
<span class="normal"> 771</span>
<span class="normal"> 772</span>
<span class="normal"> 773</span>
<span class="normal"> 774</span>
<span class="normal"> 775</span>
<span class="normal"> 776</span>
<span class="normal"> 777</span>
<span class="normal"> 778</span>
<span class="normal"> 779</span>
<span class="normal"> 780</span>
<span class="normal"> 781</span>
<span class="normal"> 782</span>
<span class="normal"> 783</span>
<span class="normal"> 784</span>
<span class="normal"> 785</span>
<span class="normal"> 786</span>
<span class="normal"> 787</span>
<span class="normal"> 788</span>
<span class="normal"> 789</span>
<span class="normal"> 790</span>
<span class="normal"> 791</span>
<span class="normal"> 792</span>
<span class="normal"> 793</span>
<span class="normal"> 794</span>
<span class="normal"> 795</span>
<span class="normal"> 796</span>
<span class="normal"> 797</span>
<span class="normal"> 798</span>
<span class="normal"> 799</span>
<span class="normal"> 800</span>
<span class="normal"> 801</span>
<span class="normal"> 802</span>
<span class="normal"> 803</span>
<span class="normal"> 804</span>
<span class="normal"> 805</span>
<span class="normal"> 806</span>
<span class="normal"> 807</span>
<span class="normal"> 808</span>
<span class="normal"> 809</span>
<span class="normal"> 810</span>
<span class="normal"> 811</span>
<span class="normal"> 812</span>
<span class="normal"> 813</span>
<span class="normal"> 814</span>
<span class="normal"> 815</span>
<span class="normal"> 816</span>
<span class="normal"> 817</span>
<span class="normal"> 818</span>
<span class="normal"> 819</span>
<span class="normal"> 820</span>
<span class="normal"> 821</span>
<span class="normal"> 822</span>
<span class="normal"> 823</span>
<span class="normal"> 824</span>
<span class="normal"> 825</span>
<span class="normal"> 826</span>
<span class="normal"> 827</span>
<span class="normal"> 828</span>
<span class="normal"> 829</span>
<span class="normal"> 830</span>
<span class="normal"> 831</span>
<span class="normal"> 832</span>
<span class="normal"> 833</span>
<span class="normal"> 834</span>
<span class="normal"> 835</span>
<span class="normal"> 836</span>
<span class="normal"> 837</span>
<span class="normal"> 838</span>
<span class="normal"> 839</span>
<span class="normal"> 840</span>
<span class="normal"> 841</span>
<span class="normal"> 842</span>
<span class="normal"> 843</span>
<span class="normal"> 844</span>
<span class="normal"> 845</span>
<span class="normal"> 846</span>
<span class="normal"> 847</span>
<span class="normal"> 848</span>
<span class="normal"> 849</span>
<span class="normal"> 850</span>
<span class="normal"> 851</span>
<span class="normal"> 852</span>
<span class="normal"> 853</span>
<span class="normal"> 854</span>
<span class="normal"> 855</span>
<span class="normal"> 856</span>
<span class="normal"> 857</span>
<span class="normal"> 858</span>
<span class="normal"> 859</span>
<span class="normal"> 860</span>
<span class="normal"> 861</span>
<span class="normal"> 862</span>
<span class="normal"> 863</span>
<span class="normal"> 864</span>
<span class="normal"> 865</span>
<span class="normal"> 866</span>
<span class="normal"> 867</span>
<span class="normal"> 868</span>
<span class="normal"> 869</span>
<span class="normal"> 870</span>
<span class="normal"> 871</span>
<span class="normal"> 872</span>
<span class="normal"> 873</span>
<span class="normal"> 874</span>
<span class="normal"> 875</span>
<span class="normal"> 876</span>
<span class="normal"> 877</span>
<span class="normal"> 878</span>
<span class="normal"> 879</span>
<span class="normal"> 880</span>
<span class="normal"> 881</span>
<span class="normal"> 882</span>
<span class="normal"> 883</span>
<span class="normal"> 884</span>
<span class="normal"> 885</span>
<span class="normal"> 886</span>
<span class="normal"> 887</span>
<span class="normal"> 888</span>
<span class="normal"> 889</span>
<span class="normal"> 890</span>
<span class="normal"> 891</span>
<span class="normal"> 892</span>
<span class="normal"> 893</span>
<span class="normal"> 894</span>
<span class="normal"> 895</span>
<span class="normal"> 896</span>
<span class="normal"> 897</span>
<span class="normal"> 898</span>
<span class="normal"> 899</span>
<span class="normal"> 900</span>
<span class="normal"> 901</span>
<span class="normal"> 902</span>
<span class="normal"> 903</span>
<span class="normal"> 904</span>
<span class="normal"> 905</span>
<span class="normal"> 906</span>
<span class="normal"> 907</span>
<span class="normal"> 908</span>
<span class="normal"> 909</span>
<span class="normal"> 910</span>
<span class="normal"> 911</span>
<span class="normal"> 912</span>
<span class="normal"> 913</span>
<span class="normal"> 914</span>
<span class="normal"> 915</span>
<span class="normal"> 916</span>
<span class="normal"> 917</span>
<span class="normal"> 918</span>
<span class="normal"> 919</span>
<span class="normal"> 920</span>
<span class="normal"> 921</span>
<span class="normal"> 922</span>
<span class="normal"> 923</span>
<span class="normal"> 924</span>
<span class="normal"> 925</span>
<span class="normal"> 926</span>
<span class="normal"> 927</span>
<span class="normal"> 928</span>
<span class="normal"> 929</span>
<span class="normal"> 930</span>
<span class="normal"> 931</span>
<span class="normal"> 932</span>
<span class="normal"> 933</span>
<span class="normal"> 934</span>
<span class="normal"> 935</span>
<span class="normal"> 936</span>
<span class="normal"> 937</span>
<span class="normal"> 938</span>
<span class="normal"> 939</span>
<span class="normal"> 940</span>
<span class="normal"> 941</span>
<span class="normal"> 942</span>
<span class="normal"> 943</span>
<span class="normal"> 944</span>
<span class="normal"> 945</span>
<span class="normal"> 946</span>
<span class="normal"> 947</span>
<span class="normal"> 948</span>
<span class="normal"> 949</span>
<span class="normal"> 950</span>
<span class="normal"> 951</span>
<span class="normal"> 952</span>
<span class="normal"> 953</span>
<span class="normal"> 954</span>
<span class="normal"> 955</span>
<span class="normal"> 956</span>
<span class="normal"> 957</span>
<span class="normal"> 958</span>
<span class="normal"> 959</span>
<span class="normal"> 960</span>
<span class="normal"> 961</span>
<span class="normal"> 962</span>
<span class="normal"> 963</span>
<span class="normal"> 964</span>
<span class="normal"> 965</span>
<span class="normal"> 966</span>
<span class="normal"> 967</span>
<span class="normal"> 968</span>
<span class="normal"> 969</span>
<span class="normal"> 970</span>
<span class="normal"> 971</span>
<span class="normal"> 972</span>
<span class="normal"> 973</span>
<span class="normal"> 974</span>
<span class="normal"> 975</span>
<span class="normal"> 976</span>
<span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span>
<span class="normal">1003</span>
<span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span>
<span class="normal">1017</span>
<span class="normal">1018</span>
<span class="normal">1019</span>
<span class="normal">1020</span>
<span class="normal">1021</span>
<span class="normal">1022</span>
<span class="normal">1023</span>
<span class="normal">1024</span>
<span class="normal">1025</span>
<span class="normal">1026</span>
<span class="normal">1027</span>
<span class="normal">1028</span>
<span class="normal">1029</span>
<span class="normal">1030</span>
<span class="normal">1031</span>
<span class="normal">1032</span>
<span class="normal">1033</span>
<span class="normal">1034</span>
<span class="normal">1035</span>
<span class="normal">1036</span>
<span class="normal">1037</span>
<span class="normal">1038</span>
<span class="normal">1039</span>
<span class="normal">1040</span>
<span class="normal">1041</span>
<span class="normal">1042</span>
<span class="normal">1043</span>
<span class="normal">1044</span>
<span class="normal">1045</span>
<span class="normal">1046</span>
<span class="normal">1047</span>
<span class="normal">1048</span>
<span class="normal">1049</span>
<span class="normal">1050</span>
<span class="normal">1051</span>
<span class="normal">1052</span>
<span class="normal">1053</span>
<span class="normal">1054</span>
<span class="normal">1055</span>
<span class="normal">1056</span>
<span class="normal">1057</span>
<span class="normal">1058</span>
<span class="normal">1059</span>
<span class="normal">1060</span>
<span class="normal">1061</span>
<span class="normal">1062</span>
<span class="normal">1063</span>
<span class="normal">1064</span>
<span class="normal">1065</span>
<span class="normal">1066</span>
<span class="normal">1067</span>
<span class="normal">1068</span>
<span class="normal">1069</span>
<span class="normal">1070</span>
<span class="normal">1071</span>
<span class="normal">1072</span>
<span class="normal">1073</span>
<span class="normal">1074</span>
<span class="normal">1075</span>
<span class="normal">1076</span>
<span class="normal">1077</span>
<span class="normal">1078</span>
<span class="normal">1079</span>
<span class="normal">1080</span>
<span class="normal">1081</span>
<span class="normal">1082</span>
<span class="normal">1083</span>
<span class="normal">1084</span>
<span class="normal">1085</span>
<span class="normal">1086</span>
<span class="normal">1087</span>
<span class="normal">1088</span>
<span class="normal">1089</span>
<span class="normal">1090</span>
<span class="normal">1091</span>
<span class="normal">1092</span>
<span class="normal">1093</span>
<span class="normal">1094</span>
<span class="normal">1095</span>
<span class="normal">1096</span>
<span class="normal">1097</span>
<span class="normal">1098</span>
<span class="normal">1099</span>
<span class="normal">1100</span>
<span class="normal">1101</span>
<span class="normal">1102</span>
<span class="normal">1103</span>
<span class="normal">1104</span>
<span class="normal">1105</span>
<span class="normal">1106</span>
<span class="normal">1107</span>
<span class="normal">1108</span>
<span class="normal">1109</span>
<span class="normal">1110</span>
<span class="normal">1111</span>
<span class="normal">1112</span>
<span class="normal">1113</span>
<span class="normal">1114</span>
<span class="normal">1115</span>
<span class="normal">1116</span>
<span class="normal">1117</span>
<span class="normal">1118</span>
<span class="normal">1119</span>
<span class="normal">1120</span>
<span class="normal">1121</span>
<span class="normal">1122</span>
<span class="normal">1123</span>
<span class="normal">1124</span>
<span class="normal">1125</span>
<span class="normal">1126</span>
<span class="normal">1127</span>
<span class="normal">1128</span>
<span class="normal">1129</span>
<span class="normal">1130</span>
<span class="normal">1131</span>
<span class="normal">1132</span>
<span class="normal">1133</span>
<span class="normal">1134</span>
<span class="normal">1135</span>
<span class="normal">1136</span>
<span class="normal">1137</span>
<span class="normal">1138</span>
<span class="normal">1139</span>
<span class="normal">1140</span>
<span class="normal">1141</span>
<span class="normal">1142</span>
<span class="normal">1143</span>
<span class="normal">1144</span>
<span class="normal">1145</span>
<span class="normal">1146</span>
<span class="normal">1147</span>
<span class="normal">1148</span>
<span class="normal">1149</span>
<span class="normal">1150</span>
<span class="normal">1151</span>
<span class="normal">1152</span>
<span class="normal">1153</span>
<span class="normal">1154</span>
<span class="normal">1155</span>
<span class="normal">1156</span>
<span class="normal">1157</span>
<span class="normal">1158</span>
<span class="normal">1159</span>
<span class="normal">1160</span>
<span class="normal">1161</span>
<span class="normal">1162</span>
<span class="normal">1163</span>
<span class="normal">1164</span>
<span class="normal">1165</span>
<span class="normal">1166</span>
<span class="normal">1167</span>
<span class="normal">1168</span>
<span class="normal">1169</span>
<span class="normal">1170</span>
<span class="normal">1171</span>
<span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span>
<span class="normal">1181</span>
<span class="normal">1182</span>
<span class="normal">1183</span>
<span class="normal">1184</span>
<span class="normal">1185</span>
<span class="normal">1186</span>
<span class="normal">1187</span>
<span class="normal">1188</span>
<span class="normal">1189</span>
<span class="normal">1190</span>
<span class="normal">1191</span>
<span class="normal">1192</span>
<span class="normal">1193</span>
<span class="normal">1194</span>
<span class="normal">1195</span>
<span class="normal">1196</span>
<span class="normal">1197</span>
<span class="normal">1198</span>
<span class="normal">1199</span>
<span class="normal">1200</span>
<span class="normal">1201</span>
<span class="normal">1202</span>
<span class="normal">1203</span>
<span class="normal">1204</span>
<span class="normal">1205</span>
<span class="normal">1206</span>
<span class="normal">1207</span>
<span class="normal">1208</span>
<span class="normal">1209</span>
<span class="normal">1210</span>
<span class="normal">1211</span>
<span class="normal">1212</span>
<span class="normal">1213</span>
<span class="normal">1214</span>
<span class="normal">1215</span>
<span class="normal">1216</span>
<span class="normal">1217</span>
<span class="normal">1218</span>
<span class="normal">1219</span>
<span class="normal">1220</span>
<span class="normal">1221</span>
<span class="normal">1222</span>
<span class="normal">1223</span>
<span class="normal">1224</span>
<span class="normal">1225</span>
<span class="normal">1226</span>
<span class="normal">1227</span>
<span class="normal">1228</span>
<span class="normal">1229</span>
<span class="normal">1230</span>
<span class="normal">1231</span>
<span class="normal">1232</span>
<span class="normal">1233</span>
<span class="normal">1234</span>
<span class="normal">1235</span>
<span class="normal">1236</span>
<span class="normal">1237</span>
<span class="normal">1238</span>
<span class="normal">1239</span>
<span class="normal">1240</span>
<span class="normal">1241</span>
<span class="normal">1242</span>
<span class="normal">1243</span>
<span class="normal">1244</span>
<span class="normal">1245</span>
<span class="normal">1246</span>
<span class="normal">1247</span>
<span class="normal">1248</span>
<span class="normal">1249</span>
<span class="normal">1250</span>
<span class="normal">1251</span>
<span class="normal">1252</span>
<span class="normal">1253</span>
<span class="normal">1254</span>
<span class="normal">1255</span>
<span class="normal">1256</span>
<span class="normal">1257</span>
<span class="normal">1258</span>
<span class="normal">1259</span>
<span class="normal">1260</span>
<span class="normal">1261</span>
<span class="normal">1262</span>
<span class="normal">1263</span>
<span class="normal">1264</span>
<span class="normal">1265</span>
<span class="normal">1266</span>
<span class="normal">1267</span>
<span class="normal">1268</span>
<span class="normal">1269</span>
<span class="normal">1270</span>
<span class="normal">1271</span>
<span class="normal">1272</span>
<span class="normal">1273</span>
<span class="normal">1274</span>
<span class="normal">1275</span>
<span class="normal">1276</span>
<span class="normal">1277</span>
<span class="normal">1278</span>
<span class="normal">1279</span>
<span class="normal">1280</span>
<span class="normal">1281</span>
<span class="normal">1282</span>
<span class="normal">1283</span>
<span class="normal">1284</span>
<span class="normal">1285</span>
<span class="normal">1286</span>
<span class="normal">1287</span>
<span class="normal">1288</span>
<span class="normal">1289</span>
<span class="normal">1290</span>
<span class="normal">1291</span>
<span class="normal">1292</span>
<span class="normal">1293</span>
<span class="normal">1294</span>
<span class="normal">1295</span>
<span class="normal">1296</span>
<span class="normal">1297</span>
<span class="normal">1298</span>
<span class="normal">1299</span>
<span class="normal">1300</span>
<span class="normal">1301</span>
<span class="normal">1302</span>
<span class="normal">1303</span>
<span class="normal">1304</span>
<span class="normal">1305</span>
<span class="normal">1306</span>
<span class="normal">1307</span>
<span class="normal">1308</span>
<span class="normal">1309</span>
<span class="normal">1310</span>
<span class="normal">1311</span>
<span class="normal">1312</span>
<span class="normal">1313</span>
<span class="normal">1314</span>
<span class="normal">1315</span>
<span class="normal">1316</span>
<span class="normal">1317</span>
<span class="normal">1318</span>
<span class="normal">1319</span>
<span class="normal">1320</span>
<span class="normal">1321</span>
<span class="normal">1322</span>
<span class="normal">1323</span>
<span class="normal">1324</span>
<span class="normal">1325</span>
<span class="normal">1326</span>
<span class="normal">1327</span>
<span class="normal">1328</span>
<span class="normal">1329</span>
<span class="normal">1330</span>
<span class="normal">1331</span>
<span class="normal">1332</span>
<span class="normal">1333</span>
<span class="normal">1334</span>
<span class="normal">1335</span>
<span class="normal">1336</span>
<span class="normal">1337</span>
<span class="normal">1338</span>
<span class="normal">1339</span>
<span class="normal">1340</span>
<span class="normal">1341</span>
<span class="normal">1342</span>
<span class="normal">1343</span>
<span class="normal">1344</span>
<span class="normal">1345</span>
<span class="normal">1346</span>
<span class="normal">1347</span>
<span class="normal">1348</span>
<span class="normal">1349</span>
<span class="normal">1350</span>
<span class="normal">1351</span>
<span class="normal">1352</span>
<span class="normal">1353</span>
<span class="normal">1354</span>
<span class="normal">1355</span>
<span class="normal">1356</span>
<span class="normal">1357</span>
<span class="normal">1358</span>
<span class="normal">1359</span>
<span class="normal">1360</span>
<span class="normal">1361</span>
<span class="normal">1362</span>
<span class="normal">1363</span>
<span class="normal">1364</span>
<span class="normal">1365</span>
<span class="normal">1366</span>
<span class="normal">1367</span>
<span class="normal">1368</span>
<span class="normal">1369</span>
<span class="normal">1370</span>
<span class="normal">1371</span>
<span class="normal">1372</span>
<span class="normal">1373</span>
<span class="normal">1374</span>
<span class="normal">1375</span>
<span class="normal">1376</span>
<span class="normal">1377</span>
<span class="normal">1378</span>
<span class="normal">1379</span>
<span class="normal">1380</span>
<span class="normal">1381</span>
<span class="normal">1382</span>
<span class="normal">1383</span>
<span class="normal">1384</span>
<span class="normal">1385</span>
<span class="normal">1386</span>
<span class="normal">1387</span>
<span class="normal">1388</span>
<span class="normal">1389</span>
<span class="normal">1390</span>
<span class="normal">1391</span>
<span class="normal">1392</span>
<span class="normal">1393</span>
<span class="normal">1394</span>
<span class="normal">1395</span>
<span class="normal">1396</span>
<span class="normal">1397</span>
<span class="normal">1398</span>
<span class="normal">1399</span>
<span class="normal">1400</span>
<span class="normal">1401</span>
<span class="normal">1402</span>
<span class="normal">1403</span>
<span class="normal">1404</span>
<span class="normal">1405</span>
<span class="normal">1406</span>
<span class="normal">1407</span>
<span class="normal">1408</span>
<span class="normal">1409</span>
<span class="normal">1410</span>
<span class="normal">1411</span>
<span class="normal">1412</span>
<span class="normal">1413</span>
<span class="normal">1414</span>
<span class="normal">1415</span>
<span class="normal">1416</span>
<span class="normal">1417</span>
<span class="normal">1418</span>
<span class="normal">1419</span>
<span class="normal">1420</span>
<span class="normal">1421</span>
<span class="normal">1422</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">SanPyWindow</span><span class="p">(</span><span class="n">QtWidgets</span><span class="o">.</span><span class="n">QMainWindow</span><span class="p">):</span>
    <span class="c1"># TODO: define parameter block for all signals.</span>

    <span class="n">signalSetXAxis</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Signal</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Emit set axis.&quot;&quot;&quot;</span>

    <span class="n">signalSwitchFile</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Signal</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="nb">object</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Emit on switch file.&quot;&quot;&quot;</span>

    <span class="n">signalSelectSweep</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Signal</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="nb">object</span><span class="p">)</span>  <span class="c1"># (ba, sweepNumber)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Emit set sweep.&quot;&quot;&quot;</span>

    <span class="n">signalUpdateAnalysis</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Signal</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Emit on detect.&quot;&quot;&quot;</span>

    <span class="n">signalSelectSpike</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Signal</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Emit spike selection.&quot;&quot;&quot;</span>

    <span class="n">signalSelectSpikeList</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Signal</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Emit spike list selection.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        path : str</span>
<span class="sd">            Full path to folder with raw files (abf,csv,tif).</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Constructing SanPyWindow&quot;</span><span class="p">)</span>
        <span class="n">date_time_str</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&quot;</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">date_time_str</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="n">_version</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getVersionInfo</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">_version</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">setAcceptDrops</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># TODO: if first time run (no &lt;user&gt;/Documents/SanPy) then warn user to quit and restart</span>

        <span class="c1"># create directories in &lt;user&gt;/Documents and add to python path</span>
        <span class="n">firstTimeRunning</span> <span class="o">=</span> <span class="n">sanpy</span><span class="o">.</span><span class="n">_util</span><span class="o">.</span><span class="n">addUserPath</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">firstTimeRunning</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;  We created &lt;user&gt;/Documents/Sanpy and need to restart&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_fileLoaderDict</span> <span class="o">=</span> <span class="n">sanpy</span><span class="o">.</span><span class="n">fileloaders</span><span class="o">.</span><span class="n">getFileLoaders</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_detectionClass</span> <span class="o">=</span> <span class="n">sanpy</span><span class="o">.</span><span class="n">bDetection</span><span class="p">()</span>

        <span class="c1"># create an empty model for file list</span>
        <span class="n">dfEmpty</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">sanpy</span><span class="o">.</span><span class="n">analysisDir</span><span class="o">.</span><span class="n">sanpyColumns</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">myModel</span> <span class="o">=</span> <span class="n">sanpy</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">bFileTable</span><span class="o">.</span><span class="n">pandasModel</span><span class="p">(</span><span class="n">dfEmpty</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fileFromDatabase</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># if False then from folder</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">startSec</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stopSec</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># TODO: put font size in options file</span>
        <span class="c1"># removed mar 26 2023</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        myFontSize = 10</span>
<span class="sd">        myFont = self.font();</span>
<span class="sd">        myFont.setPointSize(myFontSize)</span>
<span class="sd">        self.setFont(myFont)</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
            <span class="n">windowTitle</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;SanPy </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">windowTitle</span> <span class="o">=</span> <span class="s2">&quot;SanPy&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="n">windowTitle</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_rowHeight</span> <span class="o">=</span> <span class="mi">11</span>

        <span class="c1"># path to loaded folder (using bAnalysisDir)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">configDict</span><span class="p">:</span> <span class="n">sanpy</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">preferences</span> <span class="o">=</span> <span class="n">sanpy</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">preferences</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">myAnalysisDir</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">lastPath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">configDict</span><span class="o">.</span><span class="n">getMostRecentFolder</span><span class="p">()</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;  preferences lastPath is &quot;</span><span class="si">{</span><span class="n">lastPath</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">path</span>
        <span class="k">elif</span> <span class="n">lastPath</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">lastPath</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">lastPath</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># TODO: refactor dark to light theme</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">useDarkStyle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">configDict</span><span class="p">[</span><span class="s2">&quot;useDarkStyle&quot;</span><span class="p">]</span>
        <span class="c1"># self.useDarkStyle = True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toggleStyleSheet</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">useDarkStyle</span><span class="p">,</span> <span class="n">buildingInterface</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1">#</span>
        <span class="c1"># set window geometry</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setMinimumSize</span><span class="p">(</span><span class="mi">640</span><span class="p">,</span> <span class="mi">480</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">configDict</span><span class="p">[</span><span class="s2">&quot;windowGeometry&quot;</span><span class="p">][</span><span class="s2">&quot;x&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">top</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">configDict</span><span class="p">[</span><span class="s2">&quot;windowGeometry&quot;</span><span class="p">][</span><span class="s2">&quot;y&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">configDict</span><span class="p">[</span><span class="s2">&quot;windowGeometry&quot;</span><span class="p">][</span><span class="s2">&quot;width&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">configDict</span><span class="p">[</span><span class="s2">&quot;windowGeometry&quot;</span><span class="p">][</span><span class="s2">&quot;height&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setGeometry</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">left</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">top</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">myPlugins</span> <span class="o">=</span> <span class="n">sanpy</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">bPlugins</span><span class="p">(</span><span class="n">sanpyApp</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>

        <span class="c1"># order matter, _buildMenus uses objects created in _buildUI</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_buildUI</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_buildMenus</span><span class="p">()</span>

        <span class="c1"># 20210803, loadFolder was above? Still works down here</span>
        <span class="c1"># needed to update detection widget after buildUI()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">slot_loadFolder</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>

        <span class="c1"># self.raise_()  # bring to front, raise is a python keyword</span>
        <span class="c1"># self.activateWindow()  # bring to front</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">slot_updateStatus</span><span class="p">(</span><span class="s2">&quot;Ready&quot;</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;SanPy started&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">getDetectionClass</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_detectionClass</span>

    <span class="k">def</span> <span class="nf">getFileLoaderDict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fileLoaderDict</span>

    <span class="k">def</span> <span class="nf">dragEnterEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">mimeData</span><span class="p">()</span><span class="o">.</span><span class="n">hasUrls</span><span class="p">():</span>
            <span class="n">event</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">event</span><span class="o">.</span><span class="n">ignore</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">dropEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="n">folders</span> <span class="o">=</span> <span class="p">[</span><span class="n">u</span><span class="o">.</span><span class="n">toLocalFile</span><span class="p">()</span> <span class="k">for</span> <span class="n">u</span> <span class="ow">in</span> <span class="n">event</span><span class="o">.</span><span class="n">mimeData</span><span class="p">()</span><span class="o">.</span><span class="n">urls</span><span class="p">()]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">folders</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">oneFolder</span> <span class="o">=</span> <span class="n">folders</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">oneFolder</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">slot_loadFolder</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">oneFolder</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_promptIfDirty</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Prompt user if there is unsaved analysis.</span>

<span class="sd">        If this return False, do not proceed with caller action.</span>
<span class="sd">        e.g. on &#39;load folder&#39;</span>

<span class="sd">        If this returns True then proceed with caller action</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">acceptAndContinue</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">myAnalysisDir</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">tableIsDirty</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">myAnalysisDir</span><span class="o">.</span><span class="n">isDirty</span>
            <span class="n">analysisIsDirty</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">myAnalysisDir</span><span class="o">.</span><span class="n">hasDirty</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">tableIsDirty</span> <span class="ow">or</span> <span class="n">analysisIsDirty</span><span class="p">:</span>
                <span class="n">userResp</span> <span class="o">=</span> <span class="n">sanpy</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">bDialog</span><span class="o">.</span><span class="n">yesNoCancelDialog</span><span class="p">(</span>
                    <span class="s2">&quot;There is analysis that is not saved.</span><span class="se">\n</span><span class="s2">Do you want to save?&quot;</span>
                <span class="p">)</span>
                <span class="k">if</span> <span class="n">userResp</span> <span class="o">==</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">saveFilesTable</span><span class="p">()</span>
                    <span class="n">acceptAndContinue</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">elif</span> <span class="n">userResp</span> <span class="o">==</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">No</span><span class="p">:</span>
                    <span class="n">acceptAndContinue</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">else</span><span class="p">:</span>  <span class="c1"># userResp == QtWidgets.QMessageBox.Cancel:</span>
                    <span class="n">acceptAndContinue</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="n">acceptAndContinue</span>

    <span class="k">def</span> <span class="nf">closeEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Called when user closes main window or selects quit.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        event : PyQt5.QtGui.QCloseEvent</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

        <span class="c1"># check if our table view has been edited by user and warn</span>
        <span class="n">doQuit</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">alreadyAsked</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="c1"># self.myAnalysisDir is only defined after we load a folder</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">myAnalysisDir</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">tableIsDirty</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">myAnalysisDir</span><span class="o">.</span><span class="n">isDirty</span>
            <span class="n">analysisIsDirty</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">myAnalysisDir</span><span class="o">.</span><span class="n">hasDirty</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">tableIsDirty</span> <span class="ow">or</span> <span class="n">analysisIsDirty</span><span class="p">:</span>
                <span class="n">alreadyAsked</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="n">userResp</span> <span class="o">=</span> <span class="n">sanpy</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">bDialog</span><span class="o">.</span><span class="n">yesNoCancelDialog</span><span class="p">(</span>
                    <span class="s2">&quot;There is analysis that is not saved.</span><span class="se">\n</span><span class="s2">Do you want to save?&quot;</span>
                <span class="p">)</span>
                <span class="k">if</span> <span class="n">userResp</span> <span class="o">==</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">saveFilesTable</span><span class="p">()</span>
                    <span class="n">event</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
                <span class="k">elif</span> <span class="n">userResp</span> <span class="o">==</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">No</span><span class="p">:</span>
                    <span class="n">event</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">event</span><span class="o">.</span><span class="n">ignore</span><span class="p">()</span>
                    <span class="n">doQuit</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">doQuit</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">alreadyAsked</span><span class="p">:</span>
                <span class="n">userResp</span> <span class="o">=</span> <span class="n">sanpy</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">bDialog</span><span class="o">.</span><span class="n">okCancelDialog</span><span class="p">(</span>
                    <span class="s2">&quot;Are you sure you want to quit SanPy?&quot;</span><span class="p">,</span> <span class="n">informativeText</span><span class="o">=</span><span class="kc">None</span>
                <span class="p">)</span>
                <span class="k">if</span> <span class="n">userResp</span> <span class="o">==</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Cancel</span><span class="p">:</span>
                    <span class="n">event</span><span class="o">.</span><span class="n">ignore</span><span class="p">()</span>
                    <span class="n">doQuit</span> <span class="o">=</span> <span class="kc">False</span>

            <span class="k">if</span> <span class="n">doQuit</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;SanPy is quiting&quot;</span><span class="p">)</span>
                <span class="n">QtCore</span><span class="o">.</span><span class="n">QCoreApplication</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">getOptions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">configDict</span>

    <span class="k">def</span> <span class="nf">getWindowGeometry</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Get the current window position.&quot;&quot;&quot;</span>
        <span class="n">myRect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>
        <span class="n">left</span> <span class="o">=</span> <span class="n">myRect</span><span class="o">.</span><span class="n">left</span><span class="p">()</span>
        <span class="n">top</span> <span class="o">=</span> <span class="n">myRect</span><span class="o">.</span><span class="n">top</span><span class="p">()</span>
        <span class="n">width</span> <span class="o">=</span> <span class="n">myRect</span><span class="o">.</span><span class="n">width</span><span class="p">()</span>
        <span class="n">height</span> <span class="o">=</span> <span class="n">myRect</span><span class="o">.</span><span class="n">height</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">left</span><span class="p">,</span> <span class="n">top</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span>

    <span class="k">def</span> <span class="nf">toggleStyleSheet</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">doDark</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">buildingInterface</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">doDark</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">doDark</span> <span class="o">=</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">useDarkStyle</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">useDarkStyle</span> <span class="o">=</span> <span class="n">doDark</span>
        <span class="k">if</span> <span class="n">doDark</span><span class="p">:</span>
            <span class="c1"># v1</span>
            <span class="c1"># self.setStyleSheet(qdarkstyle.load_stylesheet(qt_api=&#39;pyqt5&#39;))</span>
            <span class="c1"># v2</span>
            <span class="n">qdarktheme</span><span class="o">.</span><span class="n">setup_theme</span><span class="p">(</span><span class="s2">&quot;dark&quot;</span><span class="p">)</span>

            <span class="n">pg</span><span class="o">.</span><span class="n">setConfigOption</span><span class="p">(</span><span class="s2">&quot;background&quot;</span><span class="p">,</span> <span class="s2">&quot;k&quot;</span><span class="p">)</span>
            <span class="n">pg</span><span class="o">.</span><span class="n">setConfigOption</span><span class="p">(</span><span class="s2">&quot;foreground&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># v1</span>
            <span class="c1"># self.setStyleSheet(&#39;&#39;)</span>
            <span class="c1"># v2</span>
            <span class="n">qdarktheme</span><span class="o">.</span><span class="n">setup_theme</span><span class="p">(</span><span class="s2">&quot;light&quot;</span><span class="p">)</span>

            <span class="n">pg</span><span class="o">.</span><span class="n">setConfigOption</span><span class="p">(</span><span class="s2">&quot;background&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>
            <span class="n">pg</span><span class="o">.</span><span class="n">setConfigOption</span><span class="p">(</span><span class="s2">&quot;foreground&quot;</span><span class="p">,</span> <span class="s2">&quot;k&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">configDict</span><span class="p">[</span><span class="s2">&quot;useDarkStyle&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">useDarkStyle</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">buildingInterface</span><span class="p">:</span>
            <span class="c1"># self.myScatterPlotWidget.defaultPlotLayout()</span>
            <span class="c1"># self.myScatterPlotWidget.buildUI(doRebuild=True)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">myDetectionWidget</span><span class="o">.</span><span class="n">mySetTheme</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">buildingInterface</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">pass</span>
            <span class="c1"># msg = QtWidgets.QMessageBox()</span>
            <span class="c1"># msg.setIcon(QtWidgets.QMessageBox.Warning)</span>
            <span class="c1"># msg.setText(&quot;Theme Changed&quot;)</span>
            <span class="c1"># msg.setInformativeText(&#39;Please restart SanPy for changes to take effect.&#39;)</span>
            <span class="c1"># msg.setWindowTitle(&quot;Theme Changed&quot;)</span>
            <span class="c1"># retval = msg.exec_()</span>

            <span class="c1"># self.configDict.save()</span>

    <span class="k">def</span> <span class="nf">slot_loadFolder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">folderDepth</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Load a folder of raw data files.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        path : str</span>
<span class="sd">        folderDepth : int or None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">folderDepth</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># get the depth from file list widget</span>
            <span class="n">folderDepth</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fileListWidget</span><span class="o">.</span><span class="n">getDepth</span><span class="p">()</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Loading depth:</span><span class="si">{</span><span class="n">folderDepth</span><span class="si">}</span><span class="s2"> path: </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># if folder is already loaded, ask to save</span>
        <span class="n">acceptAndContinue</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_promptIfDirty</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">acceptAndContinue</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="c1"># ask user for folder</span>
        <span class="k">if</span> <span class="n">path</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="nb">bool</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">path</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span>
                <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">getExistingDirectory</span><span class="p">(</span>
                    <span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Select Directory With Recordings&quot;</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">return</span>
        <span class="k">elif</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;    Did not load path &quot;</span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">path</span>  <span class="c1"># path to loaded bAnalysisDir folder</span>

        <span class="c1"># logger.info(f&#39;Loading path: {path}&#39;)</span>

        <span class="c1"># will create/load hd5 file for folder</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">myAnalysisDir</span> <span class="o">=</span> <span class="n">sanpy</span><span class="o">.</span><span class="n">analysisDir</span><span class="p">(</span>
            <span class="n">path</span><span class="p">,</span> <span class="n">folderDepth</span><span class="o">=</span><span class="n">folderDepth</span><span class="p">,</span> <span class="n">myApp</span><span class="o">=</span><span class="bp">self</span>
        <span class="p">)</span>

        <span class="c1"># set myAnalysisDir to file list model</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">myModel</span> <span class="o">=</span> <span class="n">sanpy</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">bFileTable</span><span class="o">.</span><span class="n">pandasModel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">myAnalysisDir</span><span class="p">)</span>
        <span class="c1"># self.myModel.signalMyDataChanged.connect(self.slot_dataChanged)</span>
        <span class="c1"># self.myModel.signalMyDataChanged.connect(self.myDetectionWidget.slot_dataChanged)</span>

        <span class="c1"># try:</span>
        <span class="k">if</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_fileListWidget</span><span class="o">.</span><span class="n">mySetModel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">myModel</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">myModel</span><span class="o">.</span><span class="n">signalMyDataChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">myDetectionWidget</span><span class="o">.</span><span class="n">slot_dataChanged</span>
            <span class="p">)</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        except (AttributeError) as e:</span>
<span class="sd">            # needed when we call loadFolder from __init__</span>
<span class="sd">            # logger.warning(&#39;OK: no tableView during load folder&#39;)</span>
<span class="sd">            pass</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># set window title</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">):</span>
            <span class="n">windowTitle</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;SanPy: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">windowTitle</span> <span class="o">=</span> <span class="s2">&quot;SanPy&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="n">windowTitle</span><span class="p">)</span>

        <span class="c1"># add to preferences recent folders</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">configDict</span><span class="o">.</span><span class="n">addFolder</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

        <span class="c1"># save preferences</span>
        <span class="c1"># self.configDict.save()</span>

<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    def slot_dataChanged(self, columnName, value, rowDict):</span>
<span class="sd">        &quot;&quot;&quot;User has edited main file table.</span>
<span class="sd">        Update detection widget for columns (Start(s), Stop(s), dvdtThreshold, mvThreshold)</span>
<span class="sd">        &quot;&quot;&quot;</span>
<span class="sd">        logger.info(f&#39;{columnName} {value}&#39;)</span>
<span class="sd">        print(&#39;  &#39;, rowDict)</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="k">def</span> <span class="nf">selectSpike</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">spikeNumber</span><span class="p">,</span> <span class="n">doZoom</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="n">eDict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;spikeNumber&quot;</span><span class="p">:</span> <span class="n">spikeNumber</span><span class="p">,</span>
            <span class="s2">&quot;doZoom&quot;</span><span class="p">:</span> <span class="n">doZoom</span><span class="p">,</span>
            <span class="s2">&quot;ba&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bAnalysis</span><span class="p">(),</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">signalSelectSpike</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">eDict</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">selectSpikeList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">spikeList</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">doZoom</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
        <span class="n">eDict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;spikeList&quot;</span><span class="p">:</span> <span class="n">spikeList</span><span class="p">,</span>
            <span class="s2">&quot;doZoom&quot;</span><span class="p">:</span> <span class="n">doZoom</span><span class="p">,</span>
            <span class="s2">&quot;ba&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bAnalysis</span><span class="p">(),</span>
        <span class="p">}</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;--&gt;&gt; emit signalSelectSpikeList </span><span class="si">{</span><span class="n">eDict</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">signalSelectSpikeList</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">eDict</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">mySignal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">this</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Receive signals from children widgets.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        this : str</span>
<span class="sd">            The signal name</span>
<span class="sd">        data : type depends on signal (this)</span>
<span class="sd">            For example, signal &#39;set x axis&#39; uses data=[min,max]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># print(&#39;=== sanpy_app.mySignal() &quot;&#39; + this +&#39;&quot;&#39;)</span>

        <span class="k">if</span> <span class="n">this</span> <span class="o">==</span> <span class="s2">&quot;select spike&quot;</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">TODO: GET RID OF &quot;select spike&quot;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">spikeNumber</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;spikeNumber&quot;</span><span class="p">]</span>
            <span class="n">doZoom</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;isShift&quot;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">selectSpike</span><span class="p">(</span><span class="n">spikeNumber</span><span class="p">,</span> <span class="n">doZoom</span><span class="o">=</span><span class="n">doZoom</span><span class="p">)</span>
            <span class="c1"># self.signalSelectSpike.emit(data)</span>

        <span class="k">elif</span> <span class="n">this</span> <span class="o">==</span> <span class="s2">&quot;set x axis&quot;</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&quot;set x axis&quot; </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">startSec</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stopSec</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="c1"># old</span>
            <span class="c1"># self.myScatterPlotWidget.selectXRange(data[0], data[1])</span>
            <span class="c1"># new</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&quot;--&gt;&gt; emit signalSetXAxis set full x axis&quot; </span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">signalSetXAxis</span><span class="o">.</span><span class="n">emit</span><span class="p">([</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>  <span class="c1"># emits to scatter plot ONLY</span>

        <span class="k">elif</span> <span class="n">this</span> <span class="o">==</span> <span class="s2">&quot;set full x axis&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">startSec</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bAnalysis</span><span class="p">()</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">stopSec</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bAnalysis</span><span class="p">()</span><span class="o">.</span><span class="n">fileLoader</span><span class="o">.</span><span class="n">recordingDur</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">stopSec</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&quot;--&gt;&gt; emit signalSetXAxis set full x axis&quot; </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">startSec</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">stopSec</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">signalSetXAxis</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">startSec</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">stopSec</span><span class="p">]</span>
            <span class="p">)</span>  <span class="c1"># emits to scatter plot ONLY</span>

        <span class="k">elif</span> <span class="n">this</span> <span class="o">==</span> <span class="s2">&quot;cancel all selections&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">selectSpike</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">selectSpikeList</span><span class="p">([])</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Did not understand this: &quot;</span><span class="si">{</span><span class="n">this</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">old_keyPressEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Respond to key press</span>

<span class="sd">        TODO: does not seem to work?</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">key</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span><span class="p">()</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;text:</span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2"> key:</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2"> event:</span><span class="si">{</span><span class="n">event</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># handled in bDetectionWidget</span>
        <span class="c1"># set full axis</span>
        <span class="c1"># if key in [70, 82]: # &#39;r&#39; or &#39;f&#39;</span>
        <span class="c1"># if key in [QtCore.Qt.Key.Key_R, QtCore.Qt.Key.Key_F]:</span>
        <span class="c1">#     self.myDetectionWidget.setAxisFull()</span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        if key in [QtCore.Qt.Key.Key_P]: # &#39;r&#39; or &#39;f&#39;</span>
<span class="sd">            self.myDetectionWidget.myPrint()</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># handled in bDetectionWidget</span>
        <span class="c1"># cancel all selections</span>
        <span class="c1"># if key == QtCore.Qt.Key.Key_Escape:</span>
        <span class="c1">#     self.mySignal(&#39;cancel all selections&#39;)</span>

        <span class="c1"># handled in bDetectionWidget</span>
        <span class="c1"># hide detection widget</span>
        <span class="c1"># if text == &#39;h&#39;:</span>
        <span class="c1">#     if self.myDetectionWidget.detectToolbarWidget.isVisible():</span>
        <span class="c1">#         self.myDetectionWidget.detectToolbarWidget.hide()</span>
        <span class="c1">#     else:</span>
        <span class="c1">#         self.myDetectionWidget.detectToolbarWidget.show()</span>

        <span class="c1"># user can copy this to the clipboard</span>
        <span class="c1"># print file list model</span>
        <span class="c1"># this is df updated as user updates table</span>
        <span class="c1"># if text == &#39;p&#39;:</span>
        <span class="c1">#     print(self.myModel)</span>
        <span class="c1">#     print(self.myModel._data)</span>

        <span class="c1">#</span>
        <span class="n">event</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">get_bAnalysis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">myDetectionWidget</span><span class="o">.</span><span class="n">ba</span>

    <span class="k">def</span> <span class="nf">getSelectedFileDict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Used by detection widget to get info in selected file.</span>

<span class="sd">        todo: remove, pass this dict in signal emit from file table</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">fileDict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fileListWidget</span><span class="o">.</span><span class="n">getTableView</span><span class="p">()</span><span class="o">.</span><span class="n">getSelectedRowDict</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">fileDict</span>

        <span class="c1"># was this</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        selectedRows = self._fileListWidget.selectionModel().selectedRows()</span>
<span class="sd">        if len(selectedRows) == 0:</span>
<span class="sd">            return None</span>
<span class="sd">        else:</span>
<span class="sd">            selectedItem = selectedRows[0]</span>
<span class="sd">            selectedRow = selectedItem.row()</span>

<span class="sd">        rowDict = self.myModel.myGetRowDict(selectedRow)</span>
<span class="sd">        return rowDict</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">slot_fileTableClicked</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">rowDict</span><span class="p">,</span> <span class="n">selectingAgain</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Respond to selections in file table.&quot;&quot;&quot;</span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        row (int):</span>
<span class="sd">        rowDict (dict):</span>
<span class="sd">        selectingAgain (bool): True if row was already selected</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">selectingAgain</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">slot_updateStatus</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Refreshing file &quot;</span><span class="si">{</span><span class="n">rowDict</span><span class="p">[</span><span class="s2">&quot;File&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">slot_updateStatus</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Loading file &quot;</span><span class="si">{</span><span class="n">rowDict</span><span class="p">[</span><span class="s2">&quot;File&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1">&quot; ... please wait&#39;</span><span class="p">)</span>

        <span class="c1"># TODO: try and remove this</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">startSec</span> <span class="o">=</span> <span class="n">rowDict</span><span class="p">[</span><span class="s2">&quot;Start(s)&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stopSec</span> <span class="o">=</span> <span class="n">rowDict</span><span class="p">[</span><span class="s2">&quot;Stop(s)&quot;</span><span class="p">]</span>

        <span class="c1"># This will load if necc, otherwise just fetch a pointer</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">myAnalysisDir</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">ba</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">myAnalysisDir</span><span class="o">.</span><span class="n">getAnalysis</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>  <span class="c1"># if None then problem loading</span>

            <span class="k">if</span> <span class="n">ba</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">signalSwitchFile</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">ba</span><span class="p">,</span> <span class="n">rowDict</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">selectingAgain</span><span class="p">:</span>
                    <span class="k">pass</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">slot_updateStatus</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s1">&#39;Loaded file &quot;</span><span class="si">{</span><span class="n">ba</span><span class="o">.</span><span class="n">fileLoader</span><span class="o">.</span><span class="n">filename</span><span class="si">}</span><span class="s1">&quot;&#39;</span>
                    <span class="p">)</span>  <span class="c1"># this will load ba if necc</span>

    <span class="k">def</span> <span class="nf">_buildMenus</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">mainMenu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">menuBar</span><span class="p">()</span>

        <span class="c1">#self.aboutAction = QtWidgets.QAction(&quot;&amp;About&quot;, self)</span>

        <span class="c1"># load</span>
        <span class="n">loadFolderAction</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QAction</span><span class="p">(</span><span class="s2">&quot;Load Folder ...&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">loadFolderAction</span><span class="o">.</span><span class="n">setShortcut</span><span class="p">(</span><span class="s2">&quot;Ctrl+O&quot;</span><span class="p">)</span>
        <span class="n">loadFolderAction</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">slot_loadFolder</span><span class="p">)</span>

        <span class="c1"># open recent (submenu)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">openRecentMenu</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QMenu</span><span class="p">(</span><span class="s2">&quot;Load Recent ...&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">openRecentMenu</span><span class="o">.</span><span class="n">aboutToShow</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_refreshOpenRecent</span><span class="p">)</span>

        <span class="n">saveDatabaseAction</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QAction</span><span class="p">(</span><span class="s2">&quot;Save Folder Analysis&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">saveDatabaseAction</span><span class="o">.</span><span class="n">setShortcut</span><span class="p">(</span><span class="s2">&quot;Ctrl+S&quot;</span><span class="p">)</span>
        <span class="n">saveDatabaseAction</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">saveFilesTable</span><span class="p">)</span>

        <span class="c1"># buildDatabaseAction = QtWidgets.QAction(&#39;Build Big Database ...&#39;, self)</span>
        <span class="c1"># buildDatabaseAction.triggered.connect(self.buildDatabase)</span>

        <span class="n">savePreferencesAction</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QAction</span><span class="p">(</span><span class="s2">&quot;Save Preferences&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">savePreferencesAction</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">configDict</span><span class="o">.</span><span class="n">save</span><span class="p">)</span>

        <span class="c1"># showLogAction = QtWidgets.QAction(&quot;Show Log&quot;, self)</span>
        <span class="c1"># showLogAction.triggered.connect(self.openLog)</span>

        <span class="n">fileMenu</span> <span class="o">=</span> <span class="n">mainMenu</span><span class="o">.</span><span class="n">addMenu</span><span class="p">(</span><span class="s2">&quot;&amp;File&quot;</span><span class="p">)</span>

        <span class="n">fileMenu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">loadFolderAction</span><span class="p">)</span>
        <span class="n">fileMenu</span><span class="o">.</span><span class="n">addMenu</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">openRecentMenu</span><span class="p">)</span>

        <span class="n">fileMenu</span><span class="o">.</span><span class="n">addSeparator</span><span class="p">()</span>
        <span class="n">fileMenu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">saveDatabaseAction</span><span class="p">)</span>

        <span class="n">fileMenu</span><span class="o">.</span><span class="n">addSeparator</span><span class="p">()</span>
        <span class="c1"># fileMenu.addAction(buildDatabaseAction)</span>
        <span class="c1"># fileMenu.addSeparator()</span>
        <span class="n">fileMenu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">savePreferencesAction</span><span class="p">)</span>

        <span class="c1"># fileMenu.addSeparator()</span>
        <span class="c1"># fileMenu.addAction(showLogAction)</span>

        <span class="c1"># view menu to toggle widgets on/off</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewMenu</span> <span class="o">=</span> <span class="n">mainMenu</span><span class="o">.</span><span class="n">addMenu</span><span class="p">(</span><span class="s2">&quot;&amp;View&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewMenu</span><span class="o">.</span><span class="n">aboutToShow</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_refreshViewMenu</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_refreshViewMenu</span><span class="p">()</span>
        <span class="c1"># self._populateViewMenu()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">windowsMenu</span> <span class="o">=</span> <span class="n">mainMenu</span><span class="o">.</span><span class="n">addMenu</span><span class="p">(</span><span class="s1">&#39;&amp;Window&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">windowsMenu</span><span class="o">.</span><span class="n">aboutToShow</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_refreshWindowsMenu</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_refreshWindowsMenu</span><span class="p">()</span>

        <span class="c1">#</span>
        <span class="c1"># plugins menu</span>
        <span class="n">pluginsMenu</span> <span class="o">=</span> <span class="n">mainMenu</span><span class="o">.</span><span class="n">addMenu</span><span class="p">(</span><span class="s2">&quot;&amp;Plugins&quot;</span><span class="p">)</span>
        <span class="c1"># list of plugin names</span>
        <span class="c1"># pluginList = self.myPlugins.pluginList()</span>
        <span class="c1"># each key is the name of theplugin</span>
        <span class="n">pluginDict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">myPlugins</span><span class="o">.</span><span class="n">pluginDict</span>
        <span class="c1"># print(&#39;pluginDict:&#39;, pluginDict)</span>
        <span class="n">_foundUserPlugin</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">for</span> <span class="n">__humanName</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">pluginDict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">v</span><span class="p">[</span><span class="s2">&quot;showInMenu&quot;</span><span class="p">]:</span>
                <span class="k">continue</span>

            <span class="c1"># logger.info(f&#39;adding plugin: {plugin}&#39;)</span>

            <span class="n">sanpyPluginAction</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QAction</span><span class="p">(</span><span class="n">__humanName</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>

            <span class="c1"># TODO: Add spacer between system and user plugins</span>
            <span class="c1"># fileMenu.addSeparator()</span>

<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            type = self.myPlugins.getType(plugin)</span>
<span class="sd">            if type == &#39;system&#39;:</span>
<span class="sd">                print(plugin, &#39;system --&gt;&gt; bold&#39;)</span>
<span class="sd">                f = sanpyPluginAction.font()</span>
<span class="sd">                f.setBold(True);</span>
<span class="sd">                f.setItalic(True);</span>
<span class="sd">                sanpyPluginAction.setFont(f);</span>
<span class="sd">            &quot;&quot;&quot;</span>

            <span class="c1"># print(v[&#39;type&#39;])</span>
            <span class="k">if</span> <span class="n">v</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;user&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">_foundUserPlugin</span><span class="p">:</span>
                    <span class="n">pluginsMenu</span><span class="o">.</span><span class="n">addSeparator</span><span class="p">()</span>
                    <span class="n">_foundUserPlugin</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="n">_font</span> <span class="o">=</span> <span class="n">sanpyPluginAction</span><span class="o">.</span><span class="n">font</span><span class="p">()</span>
                <span class="c1"># _font.setBold(True)</span>
                <span class="n">_font</span><span class="o">.</span><span class="n">setItalic</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
                <span class="n">sanpyPluginAction</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="n">_font</span><span class="p">)</span>

            <span class="n">sanpyPluginAction</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
                <span class="k">lambda</span> <span class="n">checked</span><span class="p">,</span> <span class="n">pluginName</span><span class="o">=</span><span class="n">__humanName</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">sanpyPlugin_action</span><span class="p">(</span>
                    <span class="n">pluginName</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="n">pluginsMenu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">sanpyPluginAction</span><span class="p">)</span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        pluginDir = os.path.join(self._getBundledDir(), &#39;plugins&#39;, &#39;*.txt&#39;)</span>
<span class="sd">        pluginList = glob.glob(pluginDir)</span>
<span class="sd">        logger.info(f&#39;pluginList: {pluginList}&#39;)</span>
<span class="sd">        pluginsMenu = mainMenu.addMenu(&#39;&amp;Plugins&#39;)</span>
<span class="sd">        oneAction = &#39;plotRecording&#39;</span>
<span class="sd">        sanpyPluginAction = QtWidgets.QAction(oneAction, self)</span>
<span class="sd">        #sanpyPluginAction.triggered.connect(self.sanpyPlugin_action)</span>
<span class="sd">        sanpyPluginAction.triggered.connect(lambda checked, oneAction=oneAction: self.sanpyPlugin_action(oneAction))</span>
<span class="sd">        pluginsMenu.addAction(sanpyPluginAction)</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1">#</span>
        <span class="c1"># a dynamic menu to show open plugins</span>
        <span class="c1"># self.windowsMenu = mainMenu.addMenu(&#39;&amp;Windows&#39;)</span>
        <span class="c1"># self.windowsMenu.aboutToShow.connect(self._populateOpenPlugins)</span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        # windows menu to toggle scatter plot widget</span>
<span class="sd">        windowsMenu = mainMenu.addMenu(&#39;&amp;Windows&#39;)</span>
<span class="sd">        mainWindowAction = QtWidgets.QAction(&#39;Main&#39;, self)</span>
<span class="sd">        #</span>
<span class="sd">        openScatterAction = QtWidgets.QAction(&#39;Scatter Plot&#39;, self)</span>
<span class="sd">        openScatterAction.triggered.connect(self.openScatterWindow)</span>
<span class="sd">        #mainWindowAction.triggered.connect(self.toggleStyleSheet)</span>
<span class="sd">        mainWindowAction.setCheckable(True)</span>
<span class="sd">        mainWindowAction.setChecked(True)</span>
<span class="sd">        windowsMenu.addAction(mainWindowAction)</span>
<span class="sd">        windowsMenu.addAction(openScatterAction)</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># help menu</span>
        <span class="n">helpMenu</span> <span class="o">=</span> <span class="n">mainMenu</span><span class="o">.</span><span class="n">addMenu</span><span class="p">(</span><span class="s2">&quot;&amp;Help&quot;</span><span class="p">)</span>

        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;SanPy Help (Opens In Browser)&quot;</span>
        <span class="n">action</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QAction</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">action</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_onHelpMenuAction</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span>
        <span class="n">helpMenu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>

        <span class="c1"># this actually does not show up in the help menu!</span>
        <span class="c1"># PyQt reroutes it to the main python/SanPy menu</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;About SanPy&quot;</span>
        <span class="n">action</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QAction</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">action</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_onAboutMenuAction</span><span class="p">)</span>
        <span class="n">helpMenu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>

        <span class="c1"># like the help menu, this gets rerouted to the main python/sanp menu</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Preferences ...&quot;</span>
        <span class="n">action</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QAction</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">action</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_onPreferencesMenuAction</span><span class="p">)</span>
        <span class="n">helpMenu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_onHelpMenuAction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;SanPy Help (Opens In Browser)&quot;</span><span class="p">:</span>
            <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://cudmore.github.io/SanPy/desktop-application&quot;</span>
            <span class="n">webbrowser</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">new</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_onPreferencesMenuAction</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_onAboutMenuAction</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Show a dialog with help.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_getVersionInfo</span><span class="p">())</span>

        <span class="n">dlg</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QDialog</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">dlg</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="s1">&#39;About SanPy&#39;</span><span class="p">)</span>

        <span class="n">vLayout</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">()</span>

        <span class="n">_versionInfo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getVersionInfo</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">_versionInfo</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">aText</span> <span class="o">=</span> <span class="n">k</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
            <span class="n">aLabel</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QLabel</span><span class="p">(</span><span class="n">aText</span><span class="p">)</span>

            <span class="k">if</span> <span class="s1">&#39;https&#39;</span> <span class="ow">in</span> <span class="n">v</span><span class="p">:</span>
                <span class="n">aLabel</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s1"> &lt;a href=&quot;</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s1">&quot;&gt;</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s1">&lt;/a&gt;&#39;</span><span class="p">)</span>
                <span class="n">aLabel</span><span class="o">.</span><span class="n">setTextFormat</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">RichText</span><span class="p">)</span>
                <span class="n">aLabel</span><span class="o">.</span><span class="n">setTextInteractionFlags</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">TextBrowserInteraction</span><span class="p">)</span>
                <span class="n">aLabel</span><span class="o">.</span><span class="n">setOpenExternalLinks</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">k</span> <span class="o">==</span> <span class="s1">&#39;email&#39;</span><span class="p">:</span>
                <span class="c1"># &lt;a href = &quot;mailto: abc@example.com&quot;&gt;Send Email&lt;/a&gt;</span>
                <span class="n">aLabel</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s1"> &lt;a href=&quot;mailto:</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s1">&quot;&gt;</span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s1">&lt;/a&gt;&#39;</span><span class="p">)</span>
                <span class="n">aLabel</span><span class="o">.</span><span class="n">setTextFormat</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">RichText</span><span class="p">)</span>
                <span class="n">aLabel</span><span class="o">.</span><span class="n">setTextInteractionFlags</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">TextBrowserInteraction</span><span class="p">)</span>
                <span class="n">aLabel</span><span class="o">.</span><span class="n">setOpenExternalLinks</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

            <span class="n">vLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="n">aLabel</span><span class="p">)</span>

        <span class="n">dlg</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">vLayout</span><span class="p">)</span>

        <span class="n">dlg</span><span class="o">.</span><span class="n">exec</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_getVersionInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="n">retDict</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="kn">from</span> <span class="nn">sanpy.version</span> <span class="kn">import</span> <span class="n">__version__</span>

        <span class="n">retDict</span><span class="p">[</span><span class="s1">&#39;SanPy version&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">__version__</span>
        <span class="n">retDict</span><span class="p">[</span><span class="s1">&#39;Python version&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">platform</span><span class="o">.</span><span class="n">python_version</span><span class="p">()</span>
        <span class="n">retDict</span><span class="p">[</span><span class="s1">&#39;Python platform&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">platform</span><span class="o">.</span><span class="n">platform</span><span class="p">()</span>
        <span class="n">retDict</span><span class="p">[</span><span class="s1">&#39;PyQt version&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">__version__</span>  <span class="c1"># when using import qtpy</span>
        <span class="c1"># retDict[&#39;Bundle folder&#39;] = sanpy._util.getBundledDir()</span>
        <span class="c1"># retDict[&#39;Log file&#39;] = sanpy.sanpyLogger.getLoggerFile()</span>
        <span class="n">retDict</span><span class="p">[</span><span class="s1">&#39;GitHub&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;https://github.com/cudmore/sanpy&#39;</span>
        <span class="n">retDict</span><span class="p">[</span><span class="s1">&#39;Documentation&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;https://cudmore.github.io/SanPy/&#39;</span>
        <span class="n">retDict</span><span class="p">[</span><span class="s1">&#39;email&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;rhcudmore@ucdavis.edu&#39;</span>

        <span class="k">return</span> <span class="n">retDict</span>

    <span class="k">def</span> <span class="nf">_refreshOpenRecent</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Dynamically generate the open recent file menu.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">openRecentMenu</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">recentFolder</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">configDict</span><span class="o">.</span><span class="n">getRecentFolder</span><span class="p">():</span>
            <span class="n">loadFolderAction</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QAction</span><span class="p">(</span><span class="n">recentFolder</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
            <span class="c1"># loadFolderAction.setShortcut(&#39;Ctrl+O&#39;)</span>
            <span class="n">loadFolderAction</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
                <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">slot_loadFolder</span><span class="p">,</span> <span class="n">recentFolder</span><span class="p">)</span>
            <span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">openRecentMenu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">loadFolderAction</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_refreshWindowsMenu</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">windowsMenu</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;SanPy Window&quot;</span>
        <span class="n">action</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QAction</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">checkable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">action</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">isActiveWindow</span><span class="p">())</span>
        <span class="n">action</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_windowsMenuAction</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">windowsMenu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">_widget</span> <span class="ow">in</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QApplication</span><span class="o">.</span><span class="n">topLevelWidgets</span><span class="p">():</span>
            <span class="k">if</span> <span class="s1">&#39;sanpy.interface.plugins&#39;</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">_widget</span><span class="p">)):</span>
                <span class="n">myHumanName</span> <span class="o">=</span> <span class="n">_widget</span><span class="o">.</span><span class="n">myHumanName</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">myHumanName</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">_widget</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
                <span class="n">action</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QAction</span><span class="p">(</span><span class="n">myHumanName</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">checkable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="n">action</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">_widget</span><span class="o">.</span><span class="n">isActiveWindow</span><span class="p">())</span>
                <span class="n">action</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_windowsMenuAction</span><span class="p">,</span> <span class="n">_widget</span><span class="p">,</span> <span class="n">myHumanName</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">windowsMenu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_refreshViewMenu</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Dynamically create the main &#39;View&#39; menu each time it is selected.&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">viewMenu</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">viewMenu</span><span class="o">.</span><span class="n">addSeparator</span><span class="p">()</span>

        <span class="n">key1</span> <span class="o">=</span> <span class="s2">&quot;filePanels&quot;</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;File Panel&quot;</span>
        <span class="n">checkedMainPanel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">configDict</span><span class="p">[</span><span class="n">key1</span><span class="p">][</span><span class="s2">&quot;File Panel&quot;</span><span class="p">]</span>
        <span class="n">action</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QAction</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">checkable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">action</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">checkedMainPanel</span><span class="p">)</span>
        <span class="n">action</span><span class="o">.</span><span class="n">setShortcut</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QKeySequence</span><span class="p">(</span><span class="s2">&quot;F&quot;</span><span class="p">))</span>
        <span class="n">action</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_viewMenuAction</span><span class="p">,</span> <span class="n">key1</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewMenu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">viewMenu</span><span class="o">.</span><span class="n">addSeparator</span><span class="p">()</span>

        <span class="n">key1</span> <span class="o">=</span> <span class="s2">&quot;detectionPanels&quot;</span>

        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Detection Panel&quot;</span>
        <span class="n">checkedMainPanel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">configDict</span><span class="p">[</span><span class="n">key1</span><span class="p">][</span><span class="s2">&quot;Detection Panel&quot;</span><span class="p">]</span>
        <span class="n">action</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QAction</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">checkable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">action</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">checkedMainPanel</span><span class="p">)</span>
        <span class="n">action</span><span class="o">.</span><span class="n">setShortcut</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QKeySequence</span><span class="p">(</span><span class="s2">&quot;D&quot;</span><span class="p">))</span>
        <span class="n">action</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_viewMenuAction</span><span class="p">,</span> <span class="n">key1</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewMenu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">viewMenu</span><span class="o">.</span><span class="n">addSeparator</span><span class="p">()</span>

        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Detection&quot;</span>
        <span class="n">checked</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">configDict</span><span class="p">[</span><span class="s2">&quot;detectionPanels&quot;</span><span class="p">][</span><span class="n">name</span><span class="p">]</span>
        <span class="n">action</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QAction</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">checkable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">action</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">checked</span><span class="p">)</span>
        <span class="n">action</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_viewMenuAction</span><span class="p">,</span> <span class="n">key1</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span>
        <span class="n">action</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="n">checkedMainPanel</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewMenu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>

        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Display&quot;</span>
        <span class="n">checked</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">configDict</span><span class="p">[</span><span class="s2">&quot;detectionPanels&quot;</span><span class="p">][</span><span class="n">name</span><span class="p">]</span>
        <span class="n">action</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QAction</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">checkable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">action</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">checked</span><span class="p">)</span>
        <span class="n">action</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_viewMenuAction</span><span class="p">,</span> <span class="n">key1</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span>
        <span class="n">action</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="n">checkedMainPanel</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewMenu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>

        <span class="c1"># mar 11</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Set Spikes&quot;</span>
        <span class="n">checked</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">configDict</span><span class="p">[</span><span class="s2">&quot;detectionPanels&quot;</span><span class="p">][</span><span class="n">name</span><span class="p">]</span>
        <span class="n">action</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QAction</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">checkable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">action</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">checked</span><span class="p">)</span>
        <span class="n">action</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_viewMenuAction</span><span class="p">,</span> <span class="n">key1</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span>
        <span class="n">action</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="n">checkedMainPanel</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewMenu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>

        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Plot Options&quot;</span>
        <span class="n">checked</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">configDict</span><span class="p">[</span><span class="s2">&quot;detectionPanels&quot;</span><span class="p">][</span><span class="n">name</span><span class="p">]</span>
        <span class="n">action</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QAction</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">checkable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">action</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">checked</span><span class="p">)</span>
        <span class="n">action</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_viewMenuAction</span><span class="p">,</span> <span class="n">key1</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span>
        <span class="n">action</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="n">checkedMainPanel</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewMenu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">viewMenu</span><span class="o">.</span><span class="n">addSeparator</span><span class="p">()</span>

        <span class="c1"># traces (globalvm, dvdt, dac)</span>
        <span class="n">key1</span> <span class="o">=</span> <span class="s2">&quot;rawDataPanels&quot;</span>

        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Full Recording&quot;</span>
        <span class="n">checked</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">configDict</span><span class="p">[</span><span class="n">key1</span><span class="p">][</span><span class="n">name</span><span class="p">]</span>
        <span class="n">action</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QAction</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">checkable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">action</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">checked</span><span class="p">)</span>
        <span class="n">action</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_viewMenuAction</span><span class="p">,</span> <span class="n">key1</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewMenu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>

        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Derivative&quot;</span>
        <span class="n">checked</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">configDict</span><span class="p">[</span><span class="n">key1</span><span class="p">][</span><span class="n">name</span><span class="p">]</span>
        <span class="n">action</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QAction</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">checkable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">action</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">checked</span><span class="p">)</span>
        <span class="n">action</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_viewMenuAction</span><span class="p">,</span> <span class="n">key1</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewMenu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>

        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;DAC&quot;</span>
        <span class="n">checked</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">configDict</span><span class="p">[</span><span class="n">key1</span><span class="p">][</span><span class="n">name</span><span class="p">]</span>
        <span class="n">action</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QAction</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">checkable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">action</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">checked</span><span class="p">)</span>
        <span class="n">action</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_viewMenuAction</span><span class="p">,</span> <span class="n">key1</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewMenu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">viewMenu</span><span class="o">.</span><span class="n">addSeparator</span><span class="p">()</span>

        <span class="c1"># show/hide plugin 1/2 dock widgets</span>
        <span class="n">key1</span> <span class="o">=</span> <span class="s2">&quot;pluginDocks&quot;</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Plugins 1&quot;</span>
        <span class="c1"># checkedMainPanel = self.configDict[key1][&#39;File Panel&#39;]</span>
        <span class="n">_isVisible</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pluginDock1</span><span class="o">.</span><span class="n">isVisible</span><span class="p">()</span>  <span class="c1"># assuming we _buildUI</span>
        <span class="n">action</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QAction</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">checkable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">action</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">_isVisible</span><span class="p">)</span>
        <span class="n">action</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_viewMenuAction</span><span class="p">,</span> <span class="n">key1</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewMenu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>

<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        key1 = &#39;pluginDocks&#39;</span>
<span class="sd">        name = &#39;Plugins 2&#39;</span>
<span class="sd">        _isVisible = self.pluginDock2.isVisible()  # assuming we _buildUI</span>
<span class="sd">        action = QtWidgets.QAction(name, self, checkable=True)</span>
<span class="sd">        action.setChecked(_isVisible)</span>
<span class="sd">        action.triggered.connect(partial(self._viewMenuAction, key1, name))</span>
<span class="sd">        self.viewMenu.addAction(action)</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">viewMenu</span><span class="o">.</span><span class="n">addSeparator</span><span class="p">()</span>

        <span class="c1"># TODO: refactor switching themes</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Dark Theme&quot;</span>
        <span class="n">checked</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">useDarkStyle</span>
        <span class="n">action</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QAction</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="p">,</span> <span class="n">checkable</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">action</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">checked</span><span class="p">)</span>
        <span class="c1"># action.setEnabled(False)</span>
        <span class="n">action</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_viewMenuAction</span><span class="p">,</span> <span class="s2">&quot;Dark Theme&quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">viewMenu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_windowsMenuAction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">widget</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">isChecked</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        widget : QtWidgets.QWidget</span>
<span class="sd">            Either self or an open plugin widget</span>
<span class="sd">        name : str</span>
<span class="sd">            Name of the window</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># don&#39;t toggle visibility</span>
        <span class="c1"># widget.setVisible(not widget.isVisible())</span>

        <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QApplication</span><span class="o">.</span><span class="n">setActiveWindow</span><span class="p">(</span><span class="n">widget</span><span class="p">)</span>
        <span class="n">widget</span><span class="o">.</span><span class="n">activateWindow</span><span class="p">()</span>
        <span class="n">widget</span><span class="o">.</span><span class="n">raise_</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_viewMenuAction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key1</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">isChecked</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Respond to user selection in view menu.&quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">key1</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="n">isChecked</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">configDict</span><span class="p">[</span><span class="n">key1</span><span class="p">][</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">isChecked</span>
        <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="k">if</span> <span class="n">key1</span> <span class="o">==</span> <span class="s2">&quot;filePanels&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">toggleInterface</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">isChecked</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">key1</span> <span class="o">==</span> <span class="s2">&quot;pluginDocks&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">toggleInterface</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">isChecked</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">key1</span> <span class="o">==</span> <span class="s2">&quot;rawDataPanels&quot;</span><span class="p">:</span>
            <span class="c1"># self.toggleInterface(name, isChecked)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">myDetectionWidget</span><span class="o">.</span><span class="n">toggleInterface</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">isChecked</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">key1</span> <span class="o">==</span> <span class="s2">&quot;detectionPanels&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">myDetectionWidget</span><span class="o">.</span><span class="n">toggleInterface</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">isChecked</span><span class="p">)</span>

        <span class="k">elif</span> <span class="n">key1</span> <span class="o">==</span> <span class="s2">&quot;Dark Theme&quot;</span><span class="p">:</span>
            <span class="c1"># doDark = not self.useDarkStyle</span>
            <span class="c1"># self.toggleStyleSheet(doDark=doDark)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">toggleStyleSheet</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;  no action for key1: &quot;</span><span class="si">{</span><span class="n">key1</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">toggleInterface</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">on</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Toggle named interface widgets show and hide.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        name : str</span>
<span class="sd">            Name of the widget</span>
<span class="sd">        on : bool</span>
<span class="sd">            If True then show, otherwise hide.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;File Panel&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_fileListWidget</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="n">on</span><span class="p">)</span>
            <span class="c1"># if on:</span>
            <span class="c1">#     self.fileDock.show()</span>
            <span class="c1"># else:</span>
            <span class="c1">#     self.fileDock.hide()</span>
        <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;Plugins 1&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">on</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pluginDock1</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pluginDock1</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;Plugins 2&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">on</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pluginDock2</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">pluginDock2</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">old_populateOpenPlugins</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Depreciated. Was to be a dynamic menu to show open plugins.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">windowsMenu</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="n">actions</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">plugin</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">myPlugins</span><span class="o">.</span><span class="n">_openSet</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">plugin</span><span class="o">.</span><span class="n">myHumanName</span>
            <span class="n">windowTitle</span> <span class="o">=</span> <span class="n">plugin</span><span class="o">.</span><span class="n">windowTitle</span>
            <span class="n">action</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QAction</span><span class="p">(</span><span class="n">windowTitle</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
            <span class="n">action</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
                <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">old_showOpenPlugin</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">plugin</span><span class="p">,</span> <span class="n">windowTitle</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="n">actions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">windowsMenu</span><span class="o">.</span><span class="n">addActions</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">old_showOpenPlugin</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">plugin</span><span class="p">,</span> <span class="n">windowTitle</span><span class="p">,</span> <span class="n">selected</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">plugin</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">windowTitle</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">selected</span><span class="p">)</span>
        <span class="n">plugin</span><span class="o">.</span><span class="n">bringToFront</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_buildUI</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot; &quot;</span>
<span class="sd">        File List : sanpy.interface.fileListWidget</span>
<span class="sd">        Detection Widget: sanpy.interface.bDetectionWidget</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># self.toggleStyleSheet(buildingInterface=True)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">statusBar</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QStatusBar</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setStatusBar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">statusBar</span><span class="p">)</span>

        <span class="c1"># typical wrapper for PyQt, we can&#39;t use setLayout(), we need to use setCentralWidget()</span>
        <span class="n">_mainWidget</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QWidget</span><span class="p">()</span>
        <span class="n">_mainVLayout</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="n">_mainWidget</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">_mainVLayout</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setCentralWidget</span><span class="p">(</span><span class="n">_mainWidget</span><span class="p">)</span>

        <span class="c1">#</span>
        <span class="c1"># list of files (in a dock)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fileListWidget</span> <span class="o">=</span> <span class="n">sanpy</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">fileListWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">myModel</span><span class="p">)</span>
        <span class="c1"># self._fileListWidget.signalUpdateStatus.connect(self.slot_updateStatus)  # never used</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fileListWidget</span><span class="o">.</span><span class="n">signalLoadFolder</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">slot_loadFolder</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fileListWidget</span><span class="o">.</span><span class="n">getTableView</span><span class="p">()</span><span class="o">.</span><span class="n">signalSelectRow</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">slot_fileTableClicked</span>
        <span class="p">)</span>
        <span class="c1"># self._fileListWidget.getTableView().signalSetDefaultDetection.connect(self.slot_setDetectionParams)</span>

        <span class="c1"># update dvdtThreshold, mvThreshold Start(s), Stop(s)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">signalUpdateAnalysis</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_fileListWidget</span><span class="o">.</span><span class="n">getTableView</span><span class="p">()</span><span class="o">.</span><span class="n">slot_detect</span>
        <span class="p">)</span>
        <span class="c1"># self.myDetectionWidget.signalDetect.connect(self._fileListWidget.slot_detect)</span>

        <span class="c1"># file list as a widget</span>
        <span class="c1">#_mainVLayout.addWidget(self._fileListWidget)</span>

        <span class="c1"># file list as a dock</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fileDock</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QDockWidget</span><span class="p">(</span><span class="s1">&#39;Files&#39;</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fileDock</span><span class="o">.</span><span class="n">setWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_fileListWidget</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fileDock</span><span class="o">.</span><span class="n">setFeatures</span><span class="p">(</span><span class="n">QtWidgets</span><span class="o">.</span><span class="n">QDockWidget</span><span class="o">.</span><span class="n">NoDockWidgetFeatures</span> <span class="o">|</span> \
                                  <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QDockWidget</span><span class="o">.</span><span class="n">DockWidgetVerticalTitleBar</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fileDock</span><span class="o">.</span><span class="n">setFloating</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fileDock</span><span class="o">.</span><span class="n">setTitleBarWidget</span><span class="p">(</span><span class="n">QtWidgets</span><span class="o">.</span><span class="n">QWidget</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addDockWidget</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">TopDockWidgetArea</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fileDock</span><span class="p">)</span>

        <span class="c1">#</span>
        <span class="c1"># Detection widget</span>
        <span class="n">baNone</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">myDetectionWidget</span> <span class="o">=</span> <span class="n">sanpy</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">bDetectionWidget</span><span class="p">(</span>
            <span class="n">ba</span><span class="o">=</span><span class="n">baNone</span><span class="p">,</span> <span class="n">mainWindow</span><span class="o">=</span><span class="bp">self</span>
        <span class="p">)</span>

        <span class="c1"># show/hide</span>
        <span class="n">on</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">configDict</span><span class="p">[</span><span class="s2">&quot;detectionPanels&quot;</span><span class="p">][</span><span class="s2">&quot;Detection Panel&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">myDetectionWidget</span><span class="o">.</span><span class="n">toggleInterface</span><span class="p">(</span><span class="s2">&quot;Detection Panel&quot;</span><span class="p">,</span> <span class="n">on</span><span class="p">)</span>

        <span class="c1"># (1) detection widget in main v layout</span>
        <span class="n">_mainVLayout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">myDetectionWidget</span><span class="p">)</span>

        <span class="c1"># myDetectionWidget listens to self</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">signalSwitchFile</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">myDetectionWidget</span><span class="o">.</span><span class="n">slot_switchFile</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">signalSelectSpike</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">myDetectionWidget</span><span class="o">.</span><span class="n">slot_selectSpike</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">signalSelectSpikeList</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">myDetectionWidget</span><span class="o">.</span><span class="n">slot_selectSpikeList</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">signalUpdateAnalysis</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">myDetectionWidget</span><span class="o">.</span><span class="n">slot_updateAnalysis</span><span class="p">)</span>

        <span class="c1"># self listens to myDetectionWidget</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">myDetectionWidget</span><span class="o">.</span><span class="n">signalSelectSpike</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">slot_selectSpike</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">myDetectionWidget</span><span class="o">.</span><span class="n">signalSelectSpikeList</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">slot_selectSpikeList</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">myDetectionWidget</span><span class="o">.</span><span class="n">signalSelectSweep</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">slot_selectSweep</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">myDetectionWidget</span><span class="o">.</span><span class="n">signalDetect</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">slot_detect</span><span class="p">)</span>

        <span class="c1"># (2) detection widget as a dock</span>
        <span class="c1">#  detection widget has left panel of controls and right panel of plots</span>
        <span class="c1">#  just make left controls a dock widget</span>
        <span class="c1"># self.detectionDock = QtWidgets.QDockWidget(&#39;Detection&#39;,self)</span>
        <span class="c1"># self.detectionDock.setWidget(self.myDetectionWidget)</span>
        <span class="c1"># self.detectionDock.setFeatures(QtWidgets.QDockWidget.NoDockWidgetFeatures | \</span>
        <span class="c1">#                           QtWidgets.QDockWidget.DockWidgetVerticalTitleBar)</span>
        <span class="c1"># self.detectionDock.setFloating(False)</span>
        <span class="c1"># self.detectionDock.setTitleBarWidget(QtWidgets.QWidget())</span>
        <span class="c1"># self.addDockWidget(QtCore.Qt.LeftDockWidgetArea, self.detectionDock)</span>

        <span class="c1"># self.setLayout(_mainVLayout)</span>

        <span class="c1">#</span>
        <span class="c1"># 2x docks for plugins</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">myPluginTab1</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QTabWidget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">myPluginTab1</span><span class="o">.</span><span class="n">setMovable</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">myPluginTab1</span><span class="o">.</span><span class="n">setTabsClosable</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">myPluginTab1</span><span class="o">.</span><span class="n">tabCloseRequested</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">slot_closeTab</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">myPluginTab1</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">myPluginTab1</span><span class="o">.</span><span class="n">currentChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">slot_changeTab</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">myPluginTab1</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="c1"># re-wire right-click</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">myPluginTab1</span><span class="o">.</span><span class="n">setContextMenuPolicy</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">CustomContextMenu</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">myPluginTab1</span><span class="o">.</span><span class="n">customContextMenuRequested</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">on_plugin_contextMenu</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">myPluginTab1</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="n">_openPlugins</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">configDict</span><span class="p">[</span><span class="s2">&quot;pluginPanels&quot;</span><span class="p">]</span>  <span class="c1"># dict of</span>
        <span class="k">for</span> <span class="n">_openPlugin</span><span class="p">,</span> <span class="n">_externalWindow</span> <span class="ow">in</span> <span class="n">_openPlugins</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">_externalWindow</span> <span class="o">=</span> <span class="n">_externalWindow</span><span class="p">[</span><span class="s2">&quot;externalWindow&quot;</span><span class="p">]</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;  _openPlugin:</span><span class="si">{</span><span class="n">_openPlugin</span><span class="si">}</span><span class="s2"> _externalWindow:</span><span class="si">{</span><span class="n">_externalWindow</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
            <span class="n">_oneOpenPlugin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">myPlugins</span><span class="o">.</span><span class="n">runPlugin</span><span class="p">(</span><span class="n">_openPlugin</span><span class="p">,</span> <span class="n">ba</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">_oneOpenPlugin</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">_externalWindow</span><span class="p">:</span>
                    <span class="c1"># april 30, 2023. Removed! We were opening plugins twice</span>
                    <span class="c1"># self.sanpyPlugin_action(_openPlugin)</span>
                    <span class="k">pass</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># on add tab, the QTabWIdget makes a copy !!!</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">myPluginTab1</span><span class="o">.</span><span class="n">addTab</span><span class="p">(</span><span class="n">_oneOpenPlugin</span><span class="p">,</span> <span class="n">_oneOpenPlugin</span><span class="o">.</span><span class="n">myHumanName</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pluginDock1</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QDockWidget</span><span class="p">(</span><span class="s2">&quot;Plugins&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pluginDock1</span><span class="o">.</span><span class="n">setWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">myPluginTab1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pluginDock1</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">myPluginTab1</span><span class="o">.</span><span class="n">count</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pluginDock1</span><span class="o">.</span><span class="n">setFloating</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pluginDock1</span><span class="o">.</span><span class="n">dockLocationChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">slot_dockLocationChanged</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pluginDock1</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addDockWidget</span><span class="p">(</span><span class="n">QtCore</span><span class="o">.</span><span class="n">Qt</span><span class="o">.</span><span class="n">RightDockWidgetArea</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pluginDock1</span><span class="p">)</span>

        <span class="c1">#</span>
        <span class="c1"># tabs</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        self.myPluginTab2 = QtWidgets.QTabWidget()</span>
<span class="sd">        self.myPluginTab2.setMovable(True)</span>
<span class="sd">        self.myPluginTab2.setTabsClosable(True)</span>
<span class="sd">        self.myPluginTab2.tabCloseRequested.connect(partial(self.slot_closeTab, sender=self.myPluginTab2))</span>
<span class="sd">        self.myPluginTab2.currentChanged.connect(partial(self.slot_changeTab, sender=self.myPluginTab2))</span>
<span class="sd">        # re-wire right-click</span>
<span class="sd">        self.myPluginTab2.setContextMenuPolicy(QtCore.Qt.CustomContextMenu);</span>
<span class="sd">        self.myPluginTab2.customContextMenuRequested.connect(partial(self.on_plugin_contextMenu, sender=self.myPluginTab2))</span>

<span class="sd">        self.pluginDock2 = QtWidgets.QDockWidget(&#39;Plugins 2&#39;,self)</span>
<span class="sd">        self.pluginDock2.setWidget(self.myPluginTab2)</span>
<span class="sd">        self.pluginDock2.setFloating(False)</span>
<span class="sd">        self.pluginDock2.hide() # initially hide &#39;Plugins 2&#39;</span>
<span class="sd">        self.pluginDock2.dockLocationChanged.connect(partial(self.slot_dockLocationChanged, self.pluginDock2))</span>
<span class="sd">        self.addDockWidget(QtCore.Qt.RightDockWidgetArea, self.pluginDock2)</span>
<span class="sd">        &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">sanpyPlugin_action</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pluginName</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Responds to main menu &#39;Plugins&#39;.</span>

<span class="sd">        Run a plugin using curent ba.</span>

<span class="sd">        Notes:</span>
<span class="sd">            See also on_plugin_contextMenu for running a plugin in a tab</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;opening pluginName: &quot;</span><span class="si">{</span><span class="n">pluginName</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
        <span class="n">ba</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bAnalysis</span><span class="p">()</span>

        <span class="c1"># run the plugin</span>
        <span class="n">_runningPlugin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">myPlugins</span><span class="o">.</span><span class="n">runPlugin</span><span class="p">(</span><span class="n">pluginName</span><span class="p">,</span> <span class="n">ba</span><span class="p">)</span>

        <span class="n">ltwhTuple</span> <span class="o">=</span> <span class="n">_runningPlugin</span><span class="o">.</span><span class="n">getWindowGeometry</span><span class="p">()</span>

        <span class="c1"># add plugin to preferences so it opens next time we run the app</span>
        <span class="k">if</span> <span class="n">_runningPlugin</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">configDict</span><span class="o">.</span><span class="n">addPlugin</span><span class="p">(</span>
                <span class="n">_runningPlugin</span><span class="o">.</span><span class="n">getHumanName</span><span class="p">(),</span> <span class="n">externalWindow</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ltwhTuple</span><span class="o">=</span><span class="n">ltwhTuple</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">slot_updateAnalysis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sDict</span> <span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Respond to both detect and user setting columns in ba.</span>

<span class="sd">        sDict : dict</span>
<span class="sd">            setSpikeStatEvent = {}</span>
<span class="sd">            setSpikeStatEvent[&#39;ba&#39;] = self.ba</span>
<span class="sd">            setSpikeStatEvent[&quot;spikeList&quot;] = self.getSelectedSpikes()</span>
<span class="sd">            setSpikeStatEvent[&quot;colStr&quot;] = colStr</span>
<span class="sd">            setSpikeStatEvent[&quot;value&quot;] = value</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

        <span class="c1"># do the actual update</span>
        <span class="n">ba</span> <span class="o">=</span> <span class="n">sDict</span><span class="p">[</span><span class="s1">&#39;ba&#39;</span><span class="p">]</span>
        <span class="n">spikeList</span> <span class="o">=</span> <span class="n">sDict</span><span class="p">[</span><span class="s1">&#39;spikeList&#39;</span><span class="p">]</span>
        <span class="n">colStr</span> <span class="o">=</span> <span class="n">sDict</span><span class="p">[</span><span class="s1">&#39;colStr&#39;</span><span class="p">]</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">sDict</span><span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">spikeList</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">colStr</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;setting backend: </span><span class="si">{</span><span class="n">spikeList</span><span class="si">}</span><span class="s1"> colStr: </span><span class="si">{</span><span class="n">colStr</span><span class="si">}</span><span class="s1"> to value:</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">ba</span><span class="o">.</span><span class="n">setSpikeStat</span><span class="p">(</span><span class="n">spikeList</span><span class="p">,</span> <span class="n">colStr</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">signalUpdateAnalysis</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">sDict</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">slot_selectSpike</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sDict</span><span class="p">):</span>
        <span class="n">spikeNumber</span> <span class="o">=</span> <span class="n">sDict</span><span class="p">[</span><span class="s2">&quot;spikeNumber&quot;</span><span class="p">]</span>
        <span class="n">doZoom</span> <span class="o">=</span> <span class="n">sDict</span><span class="p">[</span><span class="s2">&quot;doZoom&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selectSpike</span><span class="p">(</span><span class="n">spikeNumber</span><span class="p">,</span> <span class="n">doZoom</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">slot_selectSpikeList</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sDict</span><span class="p">):</span>
        <span class="n">spikeList</span> <span class="o">=</span> <span class="n">sDict</span><span class="p">[</span><span class="s2">&quot;spikeList&quot;</span><span class="p">]</span>
        <span class="n">doZoom</span> <span class="o">=</span> <span class="n">sDict</span><span class="p">[</span><span class="s2">&quot;doZoom&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selectSpikeList</span><span class="p">(</span><span class="n">spikeList</span><span class="p">,</span> <span class="n">doZoom</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">slot_selectSweep</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ba</span><span class="p">,</span> <span class="n">sweepNumber</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set view to new sweep.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        ba : sanpy.bAnalysis</span>
<span class="sd">        sweepNumber : int</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">signalSelectSweep</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">ba</span><span class="p">,</span> <span class="n">sweepNumber</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">saveFilesTable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Save the folder hdf5 file.&quot;&quot;&quot;</span>
        <span class="c1"># logger.info(&#39;&#39;)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">myAnalysisDir</span><span class="o">.</span><span class="n">saveHdf</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slot_updateStatus</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Save analysis for folder: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">myAnalysisDir</span><span class="o">.</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">slot_updateStatus</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Update the bottom status bar with new str&quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>

        <span class="c1"># having trouble with an immediate update?</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">statusBar</span><span class="o">.</span><span class="n">showMessage</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">statusBar</span><span class="o">.</span><span class="n">repaint</span><span class="p">()</span>
        <span class="c1"># self.statusBar.update()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">repaint</span><span class="p">()</span>
        <span class="c1"># self.update()</span>
        <span class="n">QtWidgets</span><span class="o">.</span><span class="n">qApp</span><span class="o">.</span><span class="n">processEvents</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_old_slot_setDetectionParams</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">cellType</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set detection parameters to presets.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        row : int</span>
<span class="sd">            Selected row in file table</span>
<span class="sd">        cellType : str</span>
<span class="sd">            One of (&#39;SA Node Params&#39;, &#39;Ventricular Params&#39;, &#39;Neuron Params&#39;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;row:</span><span class="si">{</span><span class="n">row</span><span class="si">}</span><span class="s2"> cellType:</span><span class="si">{</span><span class="n">cellType</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">myModel</span><span class="o">.</span><span class="n">mySetDetectionParams</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">cellType</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">slot_detect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ba</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Respond to spike detection.</span>

<span class="sd">        Usually comes from the sanpy.interface.bDetectionWidget</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">setSpikeStatEvent</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">setSpikeStatEvent</span><span class="p">[</span><span class="s1">&#39;ba&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ba</span>
        <span class="n">setSpikeStatEvent</span><span class="p">[</span><span class="s2">&quot;spikeList&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># self.getSelectedSpikes()</span>
        <span class="n">setSpikeStatEvent</span><span class="p">[</span><span class="s2">&quot;colStr&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># colStr</span>
        <span class="n">setSpikeStatEvent</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># value</span>

        <span class="c1"># sweep number does not change</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">signalUpdateAnalysis</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">setSpikeStatEvent</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">slot_updateStatus</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Detected </span><span class="si">{</span><span class="n">ba</span><span class="o">.</span><span class="n">numSpikes</span><span class="si">}</span><span class="s2"> spikes&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">on_plugin_contextMenu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">point</span><span class="p">,</span> <span class="n">sender</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;On right-click in dock, build a menu of plugins.</span>

<span class="sd">        On user selection, run the plugin in a tab.</span>

<span class="sd">        Notes:</span>
<span class="sd">            See also sanpyPlugin_action for running a plugin outside a tab (via main plugin menu)</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        point :QtCore.QPoint)</span>
<span class="sd">            Not used</span>
<span class="sd">        sender : QTabWidget</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># logger.info(f&#39;point:{point}, sender:{sender}&#39;)</span>

        <span class="c1"># list of available plugins</span>
        <span class="n">pluginList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">myPlugins</span><span class="o">.</span><span class="n">pluginList</span><span class="p">()</span>

        <span class="n">contextMenu</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QMenu</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">plugin</span> <span class="ow">in</span> <span class="n">pluginList</span><span class="p">:</span>
            <span class="n">contextMenu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">plugin</span><span class="p">)</span>

        <span class="c1"># get current mouse/cursor position</span>
        <span class="c1"># not sure what &#39;point&#39; parameter is?</span>
        <span class="n">pos</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QCursor</span><span class="o">.</span><span class="n">pos</span><span class="p">()</span>
        <span class="n">action</span> <span class="o">=</span> <span class="n">contextMenu</span><span class="o">.</span><span class="n">exec_</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">action</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># no menu selected</span>
            <span class="k">return</span>

        <span class="n">pluginName</span> <span class="o">=</span> <span class="n">action</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
        <span class="n">ba</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bAnalysis</span><span class="p">()</span>
        <span class="n">newPlugin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">myPlugins</span><span class="o">.</span><span class="n">runPlugin</span><span class="p">(</span><span class="n">pluginName</span><span class="p">,</span> <span class="n">ba</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="c1"># only add if plugin wants to be shown</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">newPlugin</span><span class="o">.</span><span class="n">getInitError</span><span class="p">()</span> <span class="ow">and</span> <span class="n">newPlugin</span><span class="o">.</span><span class="n">getShowSelf</span><span class="p">():</span>
            <span class="c1"># add tab</span>

            <span class="c1"># 1) either this</span>
            <span class="c1"># newPlugin.insertIntoScrollArea()</span>
<span class="w">            </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">            scrollArea = newPlugin.insertIntoScrollArea()</span>
<span class="sd">            if scrollArea is not None:</span>
<span class="sd">                newTabIndex = sender.addTab(scrollArea, pluginName)</span>
<span class="sd">            else:</span>
<span class="sd">                newTabIndex = sender.addTab(newPlugin, pluginName)</span>
<span class="sd">            &quot;&quot;&quot;</span>
            <span class="c1"># 2) or this</span>
            <span class="c1"># newTabIndex = sender.addTab(newPlugin, pluginName)  # addTab takes ownership</span>
            <span class="n">newTabIndex</span> <span class="o">=</span> <span class="n">sender</span><span class="o">.</span><span class="n">addTab</span><span class="p">(</span>
                <span class="n">newPlugin</span><span class="o">.</span><span class="n">getWidget</span><span class="p">(),</span> <span class="n">pluginName</span>
            <span class="p">)</span>  <span class="c1"># addTab takes ownership</span>

            <span class="c1"># widgetPointer = sender.widget(newTabIndex)</span>
            <span class="c1"># widgetPointer.insertIntoScrollArea()</span>

            <span class="c1"># bring tab to front</span>
            <span class="n">sender</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="n">newTabIndex</span><span class="p">)</span>

            <span class="n">ltwhTuple</span> <span class="o">=</span> <span class="n">newPlugin</span><span class="o">.</span><span class="n">getWindowGeometry</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">newPlugin</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">configDict</span><span class="o">.</span><span class="n">addPlugin</span><span class="p">(</span>
                    <span class="n">newPlugin</span><span class="o">.</span><span class="n">getHumanName</span><span class="p">(),</span> <span class="n">externalWindow</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ltwhTuple</span><span class="o">=</span><span class="n">ltwhTuple</span>
                <span class="p">)</span>

    <span class="k">def</span> <span class="nf">slot_dockLocationChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dock</span><span class="p">,</span> <span class="n">area</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Top level dock changed</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        dock : xxx</span>
<span class="sd">        area : enum QtCore.Qt.DockWidgetArea</span>
<span class="sd">            Basically left/top/right/bottom.</span>

<span class="sd">        Not triggered when user &#39;floats&#39; a dock (See self.slot_topLevelChanged())</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;not implemented, dock:&quot;</span><span class="si">{</span><span class="n">dock</span><span class="o">.</span><span class="n">windowTitle</span><span class="p">()</span><span class="si">}</span><span class="s1">&quot; area enum: </span><span class="si">{</span><span class="n">area</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">def</span> <span class="nf">on_fileDock_visibilityChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The file dock visibility was changed.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_viewMenuAction</span><span class="p">(</span><span class="s2">&quot;filePanels&quot;</span><span class="p">,</span> <span class="s2">&quot;File Panel&quot;</span><span class="p">,</span> <span class="n">visible</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">slot_topLevelChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">topLevel</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        topLevel (bool): True if the dock widget is now floating; otherwise False.</span>

<span class="sd">        This is triggered twice, once while dragging and once when finished</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sender</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sender</span><span class="p">()</span>  <span class="c1"># PyQt5.QtWidgets.QDockWidget</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;topLevel:</span><span class="si">{</span><span class="n">topLevel</span><span class="si">}</span><span class="s2"> sender:</span><span class="si">{</span><span class="n">sender</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">def</span> <span class="nf">slot_closeTab</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">sender</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Close an open plugin tab.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        index : int</span>
<span class="sd">            The index into sender that gives us the tab, sender.widget(index)</span>
<span class="sd">        sender : PyQt5.QtWidgets.QTabWidget</span>
<span class="sd">            The tab group where a single tab was was closed</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;index:</span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s2"> sender:</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">sender</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># remove plugin from self.xxx</span>
        <span class="c1"># pluginInstancePointer is full class to actual plugin, like</span>
        <span class="c1"># sanpy.interface.plugins.detectionParams.detectionParams</span>
        <span class="n">pluginInstancePointer</span> <span class="o">=</span> <span class="n">sender</span><span class="o">.</span><span class="n">widget</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  closing pluginInstancePointer:</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">pluginInstancePointer</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># remove from preferences</span>
        <span class="c1"># if pluginInstancePointer is not None:</span>
        <span class="c1">#     self.configDict.removePlugin(pluginInstancePointer.getHumanName())</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">myPlugins</span><span class="o">.</span><span class="n">slot_closeWindow</span><span class="p">(</span><span class="n">pluginInstancePointer</span><span class="p">)</span>

        <span class="c1"># remove the tab</span>
        <span class="n">sender</span><span class="o">.</span><span class="n">removeTab</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">slot_changeTab</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">sender</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;User brought a different tab to the front</span>

<span class="sd">        Make sure only front tab (plugins) receive signals</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;not implemented, index:</span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s2"> sender:</span><span class="si">{</span><span class="n">sender</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">_old_openLog</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Open sanpy.log&quot;&quot;&quot;</span>
        <span class="n">logFilePath</span> <span class="o">=</span> <span class="n">sanpy</span><span class="o">.</span><span class="n">sanpyLogger</span><span class="o">.</span><span class="n">getLoggerFile</span><span class="p">()</span>
        <span class="n">logFilePath</span> <span class="o">=</span> <span class="s2">&quot;file://&quot;</span> <span class="o">+</span> <span class="n">logFilePath</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">QUrl</span><span class="p">(</span><span class="n">logFilePath</span><span class="p">)</span>
        <span class="n">QtGui</span><span class="o">.</span><span class="n">QDesktopServices</span><span class="o">.</span><span class="n">openUrl</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
        </details>

  

  <div class="doc doc-children">





<h4 id="sanpy.interface.sanpy_app.SanPyWindow-attributes">Attributes<a href="#sanpy.interface.sanpy_app.SanPyWindow-attributes" class="headerlink" title="Permanent link">¤</a></h4>

<div class="doc doc-object doc-attribute">



<h5 id="sanpy.interface.sanpy_app.SanPyWindow.signalSelectSpike" class="doc doc-heading">
<code class="highlight language-python"><span class="n">signalSelectSpike</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Signal</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#sanpy.interface.sanpy_app.SanPyWindow.signalSelectSpike" class="headerlink" title="Permanent link">¤</a></h5>


  <div class="doc doc-contents ">
  
      <p>Emit spike selection.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="sanpy.interface.sanpy_app.SanPyWindow.signalSelectSpikeList" class="doc doc-heading">
<code class="highlight language-python"><span class="n">signalSelectSpikeList</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Signal</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#sanpy.interface.sanpy_app.SanPyWindow.signalSelectSpikeList" class="headerlink" title="Permanent link">¤</a></h5>


  <div class="doc doc-contents ">
  
      <p>Emit spike list selection.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="sanpy.interface.sanpy_app.SanPyWindow.signalSelectSweep" class="doc doc-heading">
<code class="highlight language-python"><span class="n">signalSelectSweep</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Signal</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="nb">object</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#sanpy.interface.sanpy_app.SanPyWindow.signalSelectSweep" class="headerlink" title="Permanent link">¤</a></h5>


  <div class="doc doc-contents ">
  
      <p>Emit set sweep.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="sanpy.interface.sanpy_app.SanPyWindow.signalSetXAxis" class="doc doc-heading">
<code class="highlight language-python"><span class="n">signalSetXAxis</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Signal</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#sanpy.interface.sanpy_app.SanPyWindow.signalSetXAxis" class="headerlink" title="Permanent link">¤</a></h5>


  <div class="doc doc-contents ">
  
      <p>Emit set axis.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="sanpy.interface.sanpy_app.SanPyWindow.signalSwitchFile" class="doc doc-heading">
<code class="highlight language-python"><span class="n">signalSwitchFile</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Signal</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="nb">object</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#sanpy.interface.sanpy_app.SanPyWindow.signalSwitchFile" class="headerlink" title="Permanent link">¤</a></h5>


  <div class="doc doc-contents ">
  
      <p>Emit on switch file.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="sanpy.interface.sanpy_app.SanPyWindow.signalUpdateAnalysis" class="doc doc-heading">
<code class="highlight language-python"><span class="n">signalUpdateAnalysis</span> <span class="o">=</span> <span class="n">QtCore</span><span class="o">.</span><span class="n">Signal</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-class-attribute"><code>class-attribute</code></small>
  </span>

<a href="#sanpy.interface.sanpy_app.SanPyWindow.signalUpdateAnalysis" class="headerlink" title="Permanent link">¤</a></h5>


  <div class="doc doc-contents ">
  
      <p>Emit on detect.</p>
  </div>

</div>

<div class="doc doc-object doc-attribute">



<h5 id="sanpy.interface.sanpy_app.SanPyWindow.stopSec" class="doc doc-heading">
<code class="highlight language-python"><span class="n">stopSec</span> <span class="o">=</span> <span class="kc">None</span></code>
  
  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

<a href="#sanpy.interface.sanpy_app.SanPyWindow.stopSec" class="headerlink" title="Permanent link">¤</a></h5>


  <div class="doc doc-contents ">
  
      <p>myFontSize = 10
myFont = self.font();
myFont.setPointSize(myFontSize)
self.setFont(myFont)</p>
  </div>

</div>

<h4 id="sanpy.interface.sanpy_app.SanPyWindow-functions">Functions<a href="#sanpy.interface.sanpy_app.SanPyWindow-functions" class="headerlink" title="Permanent link">¤</a></h4>

<div class="doc doc-object doc-function">



<h5 id="sanpy.interface.sanpy_app.SanPyWindow.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#sanpy.interface.sanpy_app.SanPyWindow.__init__" class="headerlink" title="Permanent link">¤</a></h5>


  <div class="doc doc-contents ">
  

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>path</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>Full path to folder with raw files (abf,csv,tif).</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>/Users/cudmore/Sites/SanPy/sanpy/interface/sanpy_app.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    path : str</span>
<span class="sd">        Full path to folder with raw files (abf,csv,tif).</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Constructing SanPyWindow&quot;</span><span class="p">)</span>
    <span class="n">date_time_str</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&quot;</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">date_time_str</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="n">_version</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getVersionInfo</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">_version</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="n">v</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">setAcceptDrops</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># TODO: if first time run (no &lt;user&gt;/Documents/SanPy) then warn user to quit and restart</span>

    <span class="c1"># create directories in &lt;user&gt;/Documents and add to python path</span>
    <span class="n">firstTimeRunning</span> <span class="o">=</span> <span class="n">sanpy</span><span class="o">.</span><span class="n">_util</span><span class="o">.</span><span class="n">addUserPath</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">firstTimeRunning</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;  We created &lt;user&gt;/Documents/Sanpy and need to restart&quot;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_fileLoaderDict</span> <span class="o">=</span> <span class="n">sanpy</span><span class="o">.</span><span class="n">fileloaders</span><span class="o">.</span><span class="n">getFileLoaders</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_detectionClass</span> <span class="o">=</span> <span class="n">sanpy</span><span class="o">.</span><span class="n">bDetection</span><span class="p">()</span>

    <span class="c1"># create an empty model for file list</span>
    <span class="n">dfEmpty</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">sanpy</span><span class="o">.</span><span class="n">analysisDir</span><span class="o">.</span><span class="n">sanpyColumns</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">myModel</span> <span class="o">=</span> <span class="n">sanpy</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">bFileTable</span><span class="o">.</span><span class="n">pandasModel</span><span class="p">(</span><span class="n">dfEmpty</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">fileFromDatabase</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># if False then from folder</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">startSec</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">stopSec</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># TODO: put font size in options file</span>
    <span class="c1"># removed mar 26 2023</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    myFontSize = 10</span>
<span class="sd">    myFont = self.font();</span>
<span class="sd">    myFont.setPointSize(myFontSize)</span>
<span class="sd">    self.setFont(myFont)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
        <span class="n">windowTitle</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;SanPy </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">windowTitle</span> <span class="o">=</span> <span class="s2">&quot;SanPy&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="n">windowTitle</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_rowHeight</span> <span class="o">=</span> <span class="mi">11</span>

    <span class="c1"># path to loaded folder (using bAnalysisDir)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">configDict</span><span class="p">:</span> <span class="n">sanpy</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">preferences</span> <span class="o">=</span> <span class="n">sanpy</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">preferences</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">myAnalysisDir</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">lastPath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">configDict</span><span class="o">.</span><span class="n">getMostRecentFolder</span><span class="p">()</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;  preferences lastPath is &quot;</span><span class="si">{</span><span class="n">lastPath</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">path</span>
    <span class="k">elif</span> <span class="n">lastPath</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">lastPath</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">lastPath</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># TODO: refactor dark to light theme</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">useDarkStyle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">configDict</span><span class="p">[</span><span class="s2">&quot;useDarkStyle&quot;</span><span class="p">]</span>
    <span class="c1"># self.useDarkStyle = True</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">toggleStyleSheet</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">useDarkStyle</span><span class="p">,</span> <span class="n">buildingInterface</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1">#</span>
    <span class="c1"># set window geometry</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">setMinimumSize</span><span class="p">(</span><span class="mi">640</span><span class="p">,</span> <span class="mi">480</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">configDict</span><span class="p">[</span><span class="s2">&quot;windowGeometry&quot;</span><span class="p">][</span><span class="s2">&quot;x&quot;</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">top</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">configDict</span><span class="p">[</span><span class="s2">&quot;windowGeometry&quot;</span><span class="p">][</span><span class="s2">&quot;y&quot;</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">configDict</span><span class="p">[</span><span class="s2">&quot;windowGeometry&quot;</span><span class="p">][</span><span class="s2">&quot;width&quot;</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">configDict</span><span class="p">[</span><span class="s2">&quot;windowGeometry&quot;</span><span class="p">][</span><span class="s2">&quot;height&quot;</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">setGeometry</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">left</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">top</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">width</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">myPlugins</span> <span class="o">=</span> <span class="n">sanpy</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">bPlugins</span><span class="p">(</span><span class="n">sanpyApp</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>

    <span class="c1"># order matter, _buildMenus uses objects created in _buildUI</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_buildUI</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_buildMenus</span><span class="p">()</span>

    <span class="c1"># 20210803, loadFolder was above? Still works down here</span>
    <span class="c1"># needed to update detection widget after buildUI()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slot_loadFolder</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>

    <span class="c1"># self.raise_()  # bring to front, raise is a python keyword</span>
    <span class="c1"># self.activateWindow()  # bring to front</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">slot_updateStatus</span><span class="p">(</span><span class="s2">&quot;Ready&quot;</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;SanPy started&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h5 id="sanpy.interface.sanpy_app.SanPyWindow.closeEvent" class="doc doc-heading">
<code class="highlight language-python"><span class="n">closeEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></code>

<a href="#sanpy.interface.sanpy_app.SanPyWindow.closeEvent" class="headerlink" title="Permanent link">¤</a></h5>


  <div class="doc doc-contents ">
  
      <p>Called when user closes main window or selects quit.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>event</code></td>
          <td>
                <code>PyQt5.<span title="PyQt5.QtGui">QtGui</span>.<span title="PyQt5.QtGui.QCloseEvent">QCloseEvent</span></code>
          </td>
          <td></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>/Users/cudmore/Sites/SanPy/sanpy/interface/sanpy_app.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">closeEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Called when user closes main window or selects quit.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    event : PyQt5.QtGui.QCloseEvent</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>

    <span class="c1"># check if our table view has been edited by user and warn</span>
    <span class="n">doQuit</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">alreadyAsked</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="c1"># self.myAnalysisDir is only defined after we load a folder</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">myAnalysisDir</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">tableIsDirty</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">myAnalysisDir</span><span class="o">.</span><span class="n">isDirty</span>
        <span class="n">analysisIsDirty</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">myAnalysisDir</span><span class="o">.</span><span class="n">hasDirty</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">tableIsDirty</span> <span class="ow">or</span> <span class="n">analysisIsDirty</span><span class="p">:</span>
            <span class="n">alreadyAsked</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">userResp</span> <span class="o">=</span> <span class="n">sanpy</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">bDialog</span><span class="o">.</span><span class="n">yesNoCancelDialog</span><span class="p">(</span>
                <span class="s2">&quot;There is analysis that is not saved.</span><span class="se">\n</span><span class="s2">Do you want to save?&quot;</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">userResp</span> <span class="o">==</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Yes</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">saveFilesTable</span><span class="p">()</span>
                <span class="n">event</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">userResp</span> <span class="o">==</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">No</span><span class="p">:</span>
                <span class="n">event</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">event</span><span class="o">.</span><span class="n">ignore</span><span class="p">()</span>
                <span class="n">doQuit</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="n">doQuit</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">alreadyAsked</span><span class="p">:</span>
            <span class="n">userResp</span> <span class="o">=</span> <span class="n">sanpy</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">bDialog</span><span class="o">.</span><span class="n">okCancelDialog</span><span class="p">(</span>
                <span class="s2">&quot;Are you sure you want to quit SanPy?&quot;</span><span class="p">,</span> <span class="n">informativeText</span><span class="o">=</span><span class="kc">None</span>
            <span class="p">)</span>
            <span class="k">if</span> <span class="n">userResp</span> <span class="o">==</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Cancel</span><span class="p">:</span>
                <span class="n">event</span><span class="o">.</span><span class="n">ignore</span><span class="p">()</span>
                <span class="n">doQuit</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="n">doQuit</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;SanPy is quiting&quot;</span><span class="p">)</span>
            <span class="n">QtCore</span><span class="o">.</span><span class="n">QCoreApplication</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h5 id="sanpy.interface.sanpy_app.SanPyWindow.getSelectedFileDict" class="doc doc-heading">
<code class="highlight language-python"><span class="n">getSelectedFileDict</span><span class="p">()</span></code>

<a href="#sanpy.interface.sanpy_app.SanPyWindow.getSelectedFileDict" class="headerlink" title="Permanent link">¤</a></h5>


  <div class="doc doc-contents ">
  
      <p>Used by detection widget to get info in selected file.</p>
<p>todo: remove, pass this dict in signal emit from file table</p>

      <details class="quote">
        <summary>Source code in <code>/Users/cudmore/Sites/SanPy/sanpy/interface/sanpy_app.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getSelectedFileDict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Used by detection widget to get info in selected file.</span>

<span class="sd">    todo: remove, pass this dict in signal emit from file table</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">fileDict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fileListWidget</span><span class="o">.</span><span class="n">getTableView</span><span class="p">()</span><span class="o">.</span><span class="n">getSelectedRowDict</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">fileDict</span>

    <span class="c1"># was this</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    selectedRows = self._fileListWidget.selectionModel().selectedRows()</span>
<span class="sd">    if len(selectedRows) == 0:</span>
<span class="sd">        return None</span>
<span class="sd">    else:</span>
<span class="sd">        selectedItem = selectedRows[0]</span>
<span class="sd">        selectedRow = selectedItem.row()</span>

<span class="sd">    rowDict = self.myModel.myGetRowDict(selectedRow)</span>
<span class="sd">    return rowDict</span>
<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h5 id="sanpy.interface.sanpy_app.SanPyWindow.getWindowGeometry" class="doc doc-heading">
<code class="highlight language-python"><span class="n">getWindowGeometry</span><span class="p">()</span></code>

<a href="#sanpy.interface.sanpy_app.SanPyWindow.getWindowGeometry" class="headerlink" title="Permanent link">¤</a></h5>


  <div class="doc doc-contents ">
  
      <p>Get the current window position.</p>

      <details class="quote">
        <summary>Source code in <code>/Users/cudmore/Sites/SanPy/sanpy/interface/sanpy_app.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">getWindowGeometry</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Get the current window position.&quot;&quot;&quot;</span>
    <span class="n">myRect</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>
    <span class="n">left</span> <span class="o">=</span> <span class="n">myRect</span><span class="o">.</span><span class="n">left</span><span class="p">()</span>
    <span class="n">top</span> <span class="o">=</span> <span class="n">myRect</span><span class="o">.</span><span class="n">top</span><span class="p">()</span>
    <span class="n">width</span> <span class="o">=</span> <span class="n">myRect</span><span class="o">.</span><span class="n">width</span><span class="p">()</span>
    <span class="n">height</span> <span class="o">=</span> <span class="n">myRect</span><span class="o">.</span><span class="n">height</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">left</span><span class="p">,</span> <span class="n">top</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h5 id="sanpy.interface.sanpy_app.SanPyWindow.mySignal" class="doc doc-heading">
<code class="highlight language-python"><span class="n">mySignal</span><span class="p">(</span><span class="n">this</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#sanpy.interface.sanpy_app.SanPyWindow.mySignal" class="headerlink" title="Permanent link">¤</a></h5>


  <div class="doc doc-contents ">
  
      <p>Receive signals from children widgets.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>this</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>The signal name</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>data</code></td>
          <td>
                <code>type depends on signal (this)</code>
          </td>
          <td><p>For example, signal 'set x axis' uses data=[min,max]</p></td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>/Users/cudmore/Sites/SanPy/sanpy/interface/sanpy_app.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">mySignal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">this</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Receive signals from children widgets.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    this : str</span>
<span class="sd">        The signal name</span>
<span class="sd">    data : type depends on signal (this)</span>
<span class="sd">        For example, signal &#39;set x axis&#39; uses data=[min,max]</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># print(&#39;=== sanpy_app.mySignal() &quot;&#39; + this +&#39;&quot;&#39;)</span>

    <span class="k">if</span> <span class="n">this</span> <span class="o">==</span> <span class="s2">&quot;select spike&quot;</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">TODO: GET RID OF &quot;select spike&quot;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">spikeNumber</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;spikeNumber&quot;</span><span class="p">]</span>
        <span class="n">doZoom</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&quot;isShift&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selectSpike</span><span class="p">(</span><span class="n">spikeNumber</span><span class="p">,</span> <span class="n">doZoom</span><span class="o">=</span><span class="n">doZoom</span><span class="p">)</span>
        <span class="c1"># self.signalSelectSpike.emit(data)</span>

    <span class="k">elif</span> <span class="n">this</span> <span class="o">==</span> <span class="s2">&quot;set x axis&quot;</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&quot;set x axis&quot; </span><span class="si">{</span><span class="n">data</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">startSec</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stopSec</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="c1"># old</span>
        <span class="c1"># self.myScatterPlotWidget.selectXRange(data[0], data[1])</span>
        <span class="c1"># new</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&quot;--&gt;&gt; emit signalSetXAxis set full x axis&quot; </span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">signalSetXAxis</span><span class="o">.</span><span class="n">emit</span><span class="p">([</span><span class="n">data</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">data</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>  <span class="c1"># emits to scatter plot ONLY</span>

    <span class="k">elif</span> <span class="n">this</span> <span class="o">==</span> <span class="s2">&quot;set full x axis&quot;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">startSec</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bAnalysis</span><span class="p">()</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stopSec</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bAnalysis</span><span class="p">()</span><span class="o">.</span><span class="n">fileLoader</span><span class="o">.</span><span class="n">recordingDur</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stopSec</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;&quot;--&gt;&gt; emit signalSetXAxis set full x axis&quot; </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">startSec</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">stopSec</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">signalSetXAxis</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">startSec</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">stopSec</span><span class="p">]</span>
        <span class="p">)</span>  <span class="c1"># emits to scatter plot ONLY</span>

    <span class="k">elif</span> <span class="n">this</span> <span class="o">==</span> <span class="s2">&quot;cancel all selections&quot;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selectSpike</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selectSpikeList</span><span class="p">([])</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Did not understand this: &quot;</span><span class="si">{</span><span class="n">this</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h5 id="sanpy.interface.sanpy_app.SanPyWindow.old_keyPressEvent" class="doc doc-heading">
<code class="highlight language-python"><span class="n">old_keyPressEvent</span><span class="p">(</span><span class="n">event</span><span class="p">)</span></code>

<a href="#sanpy.interface.sanpy_app.SanPyWindow.old_keyPressEvent" class="headerlink" title="Permanent link">¤</a></h5>


  <div class="doc doc-contents ">
  
      <p>Respond to key press</p>
<p>TODO: does not seem to work?</p>

      <details class="quote">
        <summary>Source code in <code>/Users/cudmore/Sites/SanPy/sanpy/interface/sanpy_app.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">old_keyPressEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Respond to key press</span>

<span class="sd">    TODO: does not seem to work?</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">key</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span><span class="p">()</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">event</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;text:</span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2"> key:</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2"> event:</span><span class="si">{</span><span class="n">event</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># handled in bDetectionWidget</span>
    <span class="c1"># set full axis</span>
    <span class="c1"># if key in [70, 82]: # &#39;r&#39; or &#39;f&#39;</span>
    <span class="c1"># if key in [QtCore.Qt.Key.Key_R, QtCore.Qt.Key.Key_F]:</span>
    <span class="c1">#     self.myDetectionWidget.setAxisFull()</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    if key in [QtCore.Qt.Key.Key_P]: # &#39;r&#39; or &#39;f&#39;</span>
<span class="sd">        self.myDetectionWidget.myPrint()</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># handled in bDetectionWidget</span>
    <span class="c1"># cancel all selections</span>
    <span class="c1"># if key == QtCore.Qt.Key.Key_Escape:</span>
    <span class="c1">#     self.mySignal(&#39;cancel all selections&#39;)</span>

    <span class="c1"># handled in bDetectionWidget</span>
    <span class="c1"># hide detection widget</span>
    <span class="c1"># if text == &#39;h&#39;:</span>
    <span class="c1">#     if self.myDetectionWidget.detectToolbarWidget.isVisible():</span>
    <span class="c1">#         self.myDetectionWidget.detectToolbarWidget.hide()</span>
    <span class="c1">#     else:</span>
    <span class="c1">#         self.myDetectionWidget.detectToolbarWidget.show()</span>

    <span class="c1"># user can copy this to the clipboard</span>
    <span class="c1"># print file list model</span>
    <span class="c1"># this is df updated as user updates table</span>
    <span class="c1"># if text == &#39;p&#39;:</span>
    <span class="c1">#     print(self.myModel)</span>
    <span class="c1">#     print(self.myModel._data)</span>

    <span class="c1">#</span>
    <span class="n">event</span><span class="o">.</span><span class="n">accept</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h5 id="sanpy.interface.sanpy_app.SanPyWindow.old_populateOpenPlugins" class="doc doc-heading">
<code class="highlight language-python"><span class="n">old_populateOpenPlugins</span><span class="p">()</span></code>

<a href="#sanpy.interface.sanpy_app.SanPyWindow.old_populateOpenPlugins" class="headerlink" title="Permanent link">¤</a></h5>


  <div class="doc doc-contents ">
  
      <p>Depreciated. Was to be a dynamic menu to show open plugins.</p>

      <details class="quote">
        <summary>Source code in <code>/Users/cudmore/Sites/SanPy/sanpy/interface/sanpy_app.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1004</span>
<span class="normal">1005</span>
<span class="normal">1006</span>
<span class="normal">1007</span>
<span class="normal">1008</span>
<span class="normal">1009</span>
<span class="normal">1010</span>
<span class="normal">1011</span>
<span class="normal">1012</span>
<span class="normal">1013</span>
<span class="normal">1014</span>
<span class="normal">1015</span>
<span class="normal">1016</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">old_populateOpenPlugins</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Depreciated. Was to be a dynamic menu to show open plugins.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">windowsMenu</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
    <span class="n">actions</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">plugin</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">myPlugins</span><span class="o">.</span><span class="n">_openSet</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">plugin</span><span class="o">.</span><span class="n">myHumanName</span>
        <span class="n">windowTitle</span> <span class="o">=</span> <span class="n">plugin</span><span class="o">.</span><span class="n">windowTitle</span>
        <span class="n">action</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QAction</span><span class="p">(</span><span class="n">windowTitle</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span>
        <span class="n">action</span><span class="o">.</span><span class="n">triggered</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="n">partial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">old_showOpenPlugin</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">plugin</span><span class="p">,</span> <span class="n">windowTitle</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">actions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">action</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">windowsMenu</span><span class="o">.</span><span class="n">addActions</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h5 id="sanpy.interface.sanpy_app.SanPyWindow.on_fileDock_visibilityChanged" class="doc doc-heading">
<code class="highlight language-python"><span class="n">on_fileDock_visibilityChanged</span><span class="p">(</span><span class="n">visible</span><span class="p">)</span></code>

<a href="#sanpy.interface.sanpy_app.SanPyWindow.on_fileDock_visibilityChanged" class="headerlink" title="Permanent link">¤</a></h5>


  <div class="doc doc-contents ">
  
      <p>The file dock visibility was changed.</p>

      <details class="quote">
        <summary>Source code in <code>/Users/cudmore/Sites/SanPy/sanpy/interface/sanpy_app.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1367</span>
<span class="normal">1368</span>
<span class="normal">1369</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">on_fileDock_visibilityChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The file dock visibility was changed.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_viewMenuAction</span><span class="p">(</span><span class="s2">&quot;filePanels&quot;</span><span class="p">,</span> <span class="s2">&quot;File Panel&quot;</span><span class="p">,</span> <span class="n">visible</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h5 id="sanpy.interface.sanpy_app.SanPyWindow.on_plugin_contextMenu" class="doc doc-heading">
<code class="highlight language-python"><span class="n">on_plugin_contextMenu</span><span class="p">(</span><span class="n">point</span><span class="p">,</span> <span class="n">sender</span><span class="p">)</span></code>

<a href="#sanpy.interface.sanpy_app.SanPyWindow.on_plugin_contextMenu" class="headerlink" title="Permanent link">¤</a></h5>


  <div class="doc doc-contents ">
  
      <p>On right-click in dock, build a menu of plugins.</p>
<p>On user selection, run the plugin in a tab.</p>
<p>Notes:
    See also sanpyPlugin_action for running a plugin outside a tab (via main plugin menu)</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>point</code></td>
          <td>
          </td>
          <td><p>Not used</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>sender</code></td>
          <td>
                <code>QTabWidget</code>
          </td>
          <td></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>/Users/cudmore/Sites/SanPy/sanpy/interface/sanpy_app.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1284</span>
<span class="normal">1285</span>
<span class="normal">1286</span>
<span class="normal">1287</span>
<span class="normal">1288</span>
<span class="normal">1289</span>
<span class="normal">1290</span>
<span class="normal">1291</span>
<span class="normal">1292</span>
<span class="normal">1293</span>
<span class="normal">1294</span>
<span class="normal">1295</span>
<span class="normal">1296</span>
<span class="normal">1297</span>
<span class="normal">1298</span>
<span class="normal">1299</span>
<span class="normal">1300</span>
<span class="normal">1301</span>
<span class="normal">1302</span>
<span class="normal">1303</span>
<span class="normal">1304</span>
<span class="normal">1305</span>
<span class="normal">1306</span>
<span class="normal">1307</span>
<span class="normal">1308</span>
<span class="normal">1309</span>
<span class="normal">1310</span>
<span class="normal">1311</span>
<span class="normal">1312</span>
<span class="normal">1313</span>
<span class="normal">1314</span>
<span class="normal">1315</span>
<span class="normal">1316</span>
<span class="normal">1317</span>
<span class="normal">1318</span>
<span class="normal">1319</span>
<span class="normal">1320</span>
<span class="normal">1321</span>
<span class="normal">1322</span>
<span class="normal">1323</span>
<span class="normal">1324</span>
<span class="normal">1325</span>
<span class="normal">1326</span>
<span class="normal">1327</span>
<span class="normal">1328</span>
<span class="normal">1329</span>
<span class="normal">1330</span>
<span class="normal">1331</span>
<span class="normal">1332</span>
<span class="normal">1333</span>
<span class="normal">1334</span>
<span class="normal">1335</span>
<span class="normal">1336</span>
<span class="normal">1337</span>
<span class="normal">1338</span>
<span class="normal">1339</span>
<span class="normal">1340</span>
<span class="normal">1341</span>
<span class="normal">1342</span>
<span class="normal">1343</span>
<span class="normal">1344</span>
<span class="normal">1345</span>
<span class="normal">1346</span>
<span class="normal">1347</span>
<span class="normal">1348</span>
<span class="normal">1349</span>
<span class="normal">1350</span>
<span class="normal">1351</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">on_plugin_contextMenu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">point</span><span class="p">,</span> <span class="n">sender</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;On right-click in dock, build a menu of plugins.</span>

<span class="sd">    On user selection, run the plugin in a tab.</span>

<span class="sd">    Notes:</span>
<span class="sd">        See also sanpyPlugin_action for running a plugin outside a tab (via main plugin menu)</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    point :QtCore.QPoint)</span>
<span class="sd">        Not used</span>
<span class="sd">    sender : QTabWidget</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># logger.info(f&#39;point:{point}, sender:{sender}&#39;)</span>

    <span class="c1"># list of available plugins</span>
    <span class="n">pluginList</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">myPlugins</span><span class="o">.</span><span class="n">pluginList</span><span class="p">()</span>

    <span class="n">contextMenu</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QMenu</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">plugin</span> <span class="ow">in</span> <span class="n">pluginList</span><span class="p">:</span>
        <span class="n">contextMenu</span><span class="o">.</span><span class="n">addAction</span><span class="p">(</span><span class="n">plugin</span><span class="p">)</span>

    <span class="c1"># get current mouse/cursor position</span>
    <span class="c1"># not sure what &#39;point&#39; parameter is?</span>
    <span class="n">pos</span> <span class="o">=</span> <span class="n">QtGui</span><span class="o">.</span><span class="n">QCursor</span><span class="o">.</span><span class="n">pos</span><span class="p">()</span>
    <span class="n">action</span> <span class="o">=</span> <span class="n">contextMenu</span><span class="o">.</span><span class="n">exec_</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">action</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># no menu selected</span>
        <span class="k">return</span>

    <span class="n">pluginName</span> <span class="o">=</span> <span class="n">action</span><span class="o">.</span><span class="n">text</span><span class="p">()</span>
    <span class="n">ba</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bAnalysis</span><span class="p">()</span>
    <span class="n">newPlugin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">myPlugins</span><span class="o">.</span><span class="n">runPlugin</span><span class="p">(</span><span class="n">pluginName</span><span class="p">,</span> <span class="n">ba</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="c1"># only add if plugin wants to be shown</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">newPlugin</span><span class="o">.</span><span class="n">getInitError</span><span class="p">()</span> <span class="ow">and</span> <span class="n">newPlugin</span><span class="o">.</span><span class="n">getShowSelf</span><span class="p">():</span>
        <span class="c1"># add tab</span>

        <span class="c1"># 1) either this</span>
        <span class="c1"># newPlugin.insertIntoScrollArea()</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        scrollArea = newPlugin.insertIntoScrollArea()</span>
<span class="sd">        if scrollArea is not None:</span>
<span class="sd">            newTabIndex = sender.addTab(scrollArea, pluginName)</span>
<span class="sd">        else:</span>
<span class="sd">            newTabIndex = sender.addTab(newPlugin, pluginName)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># 2) or this</span>
        <span class="c1"># newTabIndex = sender.addTab(newPlugin, pluginName)  # addTab takes ownership</span>
        <span class="n">newTabIndex</span> <span class="o">=</span> <span class="n">sender</span><span class="o">.</span><span class="n">addTab</span><span class="p">(</span>
            <span class="n">newPlugin</span><span class="o">.</span><span class="n">getWidget</span><span class="p">(),</span> <span class="n">pluginName</span>
        <span class="p">)</span>  <span class="c1"># addTab takes ownership</span>

        <span class="c1"># widgetPointer = sender.widget(newTabIndex)</span>
        <span class="c1"># widgetPointer.insertIntoScrollArea()</span>

        <span class="c1"># bring tab to front</span>
        <span class="n">sender</span><span class="o">.</span><span class="n">setCurrentIndex</span><span class="p">(</span><span class="n">newTabIndex</span><span class="p">)</span>

        <span class="n">ltwhTuple</span> <span class="o">=</span> <span class="n">newPlugin</span><span class="o">.</span><span class="n">getWindowGeometry</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">newPlugin</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">configDict</span><span class="o">.</span><span class="n">addPlugin</span><span class="p">(</span>
                <span class="n">newPlugin</span><span class="o">.</span><span class="n">getHumanName</span><span class="p">(),</span> <span class="n">externalWindow</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">ltwhTuple</span><span class="o">=</span><span class="n">ltwhTuple</span>
            <span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h5 id="sanpy.interface.sanpy_app.SanPyWindow.sanpyPlugin_action" class="doc doc-heading">
<code class="highlight language-python"><span class="n">sanpyPlugin_action</span><span class="p">(</span><span class="n">pluginName</span><span class="p">)</span></code>

<a href="#sanpy.interface.sanpy_app.SanPyWindow.sanpyPlugin_action" class="headerlink" title="Permanent link">¤</a></h5>


  <div class="doc doc-contents ">
  
      <p>Responds to main menu 'Plugins'.</p>
<p>Run a plugin using curent ba.</p>
<p>Notes:
    See also on_plugin_contextMenu for running a plugin in a tab</p>

      <details class="quote">
        <summary>Source code in <code>/Users/cudmore/Sites/SanPy/sanpy/interface/sanpy_app.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1170</span>
<span class="normal">1171</span>
<span class="normal">1172</span>
<span class="normal">1173</span>
<span class="normal">1174</span>
<span class="normal">1175</span>
<span class="normal">1176</span>
<span class="normal">1177</span>
<span class="normal">1178</span>
<span class="normal">1179</span>
<span class="normal">1180</span>
<span class="normal">1181</span>
<span class="normal">1182</span>
<span class="normal">1183</span>
<span class="normal">1184</span>
<span class="normal">1185</span>
<span class="normal">1186</span>
<span class="normal">1187</span>
<span class="normal">1188</span>
<span class="normal">1189</span>
<span class="normal">1190</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">sanpyPlugin_action</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pluginName</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Responds to main menu &#39;Plugins&#39;.</span>

<span class="sd">    Run a plugin using curent ba.</span>

<span class="sd">    Notes:</span>
<span class="sd">        See also on_plugin_contextMenu for running a plugin in a tab</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;opening pluginName: &quot;</span><span class="si">{</span><span class="n">pluginName</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
    <span class="n">ba</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_bAnalysis</span><span class="p">()</span>

    <span class="c1"># run the plugin</span>
    <span class="n">_runningPlugin</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">myPlugins</span><span class="o">.</span><span class="n">runPlugin</span><span class="p">(</span><span class="n">pluginName</span><span class="p">,</span> <span class="n">ba</span><span class="p">)</span>

    <span class="n">ltwhTuple</span> <span class="o">=</span> <span class="n">_runningPlugin</span><span class="o">.</span><span class="n">getWindowGeometry</span><span class="p">()</span>

    <span class="c1"># add plugin to preferences so it opens next time we run the app</span>
    <span class="k">if</span> <span class="n">_runningPlugin</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">configDict</span><span class="o">.</span><span class="n">addPlugin</span><span class="p">(</span>
            <span class="n">_runningPlugin</span><span class="o">.</span><span class="n">getHumanName</span><span class="p">(),</span> <span class="n">externalWindow</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">ltwhTuple</span><span class="o">=</span><span class="n">ltwhTuple</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h5 id="sanpy.interface.sanpy_app.SanPyWindow.saveFilesTable" class="doc doc-heading">
<code class="highlight language-python"><span class="n">saveFilesTable</span><span class="p">()</span></code>

<a href="#sanpy.interface.sanpy_app.SanPyWindow.saveFilesTable" class="headerlink" title="Permanent link">¤</a></h5>


  <div class="doc doc-contents ">
  
      <p>Save the folder hdf5 file.</p>

      <details class="quote">
        <summary>Source code in <code>/Users/cudmore/Sites/SanPy/sanpy/interface/sanpy_app.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1236</span>
<span class="normal">1237</span>
<span class="normal">1238</span>
<span class="normal">1239</span>
<span class="normal">1240</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">saveFilesTable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Save the folder hdf5 file.&quot;&quot;&quot;</span>
    <span class="c1"># logger.info(&#39;&#39;)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">myAnalysisDir</span><span class="o">.</span><span class="n">saveHdf</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">slot_updateStatus</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Save analysis for folder: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">myAnalysisDir</span><span class="o">.</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h5 id="sanpy.interface.sanpy_app.SanPyWindow.slot_changeTab" class="doc doc-heading">
<code class="highlight language-python"><span class="n">slot_changeTab</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">sender</span><span class="p">)</span></code>

<a href="#sanpy.interface.sanpy_app.SanPyWindow.slot_changeTab" class="headerlink" title="Permanent link">¤</a></h5>


  <div class="doc doc-contents ">
  
      <p>User brought a different tab to the front</p>
<p>Make sure only front tab (plugins) receive signals</p>

      <details class="quote">
        <summary>Source code in <code>/Users/cudmore/Sites/SanPy/sanpy/interface/sanpy_app.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1409</span>
<span class="normal">1410</span>
<span class="normal">1411</span>
<span class="normal">1412</span>
<span class="normal">1413</span>
<span class="normal">1414</span>
<span class="normal">1415</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">slot_changeTab</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">sender</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;User brought a different tab to the front</span>

<span class="sd">    Make sure only front tab (plugins) receive signals</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;not implemented, index:</span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s2"> sender:</span><span class="si">{</span><span class="n">sender</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">pass</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h5 id="sanpy.interface.sanpy_app.SanPyWindow.slot_closeTab" class="doc doc-heading">
<code class="highlight language-python"><span class="n">slot_closeTab</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">sender</span><span class="p">)</span></code>

<a href="#sanpy.interface.sanpy_app.SanPyWindow.slot_closeTab" class="headerlink" title="Permanent link">¤</a></h5>


  <div class="doc doc-contents ">
  
      <p>Close an open plugin tab.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>index</code></td>
          <td>
                <code>int</code>
          </td>
          <td><p>The index into sender that gives us the tab, sender.widget(index)</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>sender</code></td>
          <td>
                <code>PyQt5.<span title="PyQt5.QtWidgets">QtWidgets</span>.<span title="PyQt5.QtWidgets.QTabWidget">QTabWidget</span></code>
          </td>
          <td><p>The tab group where a single tab was was closed</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>/Users/cudmore/Sites/SanPy/sanpy/interface/sanpy_app.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1381</span>
<span class="normal">1382</span>
<span class="normal">1383</span>
<span class="normal">1384</span>
<span class="normal">1385</span>
<span class="normal">1386</span>
<span class="normal">1387</span>
<span class="normal">1388</span>
<span class="normal">1389</span>
<span class="normal">1390</span>
<span class="normal">1391</span>
<span class="normal">1392</span>
<span class="normal">1393</span>
<span class="normal">1394</span>
<span class="normal">1395</span>
<span class="normal">1396</span>
<span class="normal">1397</span>
<span class="normal">1398</span>
<span class="normal">1399</span>
<span class="normal">1400</span>
<span class="normal">1401</span>
<span class="normal">1402</span>
<span class="normal">1403</span>
<span class="normal">1404</span>
<span class="normal">1405</span>
<span class="normal">1406</span>
<span class="normal">1407</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">slot_closeTab</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span><span class="p">,</span> <span class="n">sender</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Close an open plugin tab.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    index : int</span>
<span class="sd">        The index into sender that gives us the tab, sender.widget(index)</span>
<span class="sd">    sender : PyQt5.QtWidgets.QTabWidget</span>
<span class="sd">        The tab group where a single tab was was closed</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;index:</span><span class="si">{</span><span class="n">index</span><span class="si">}</span><span class="s2"> sender:</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">sender</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># remove plugin from self.xxx</span>
    <span class="c1"># pluginInstancePointer is full class to actual plugin, like</span>
    <span class="c1"># sanpy.interface.plugins.detectionParams.detectionParams</span>
    <span class="n">pluginInstancePointer</span> <span class="o">=</span> <span class="n">sender</span><span class="o">.</span><span class="n">widget</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  closing pluginInstancePointer:</span><span class="si">{</span><span class="nb">type</span><span class="p">(</span><span class="n">pluginInstancePointer</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># remove from preferences</span>
    <span class="c1"># if pluginInstancePointer is not None:</span>
    <span class="c1">#     self.configDict.removePlugin(pluginInstancePointer.getHumanName())</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">myPlugins</span><span class="o">.</span><span class="n">slot_closeWindow</span><span class="p">(</span><span class="n">pluginInstancePointer</span><span class="p">)</span>

    <span class="c1"># remove the tab</span>
    <span class="n">sender</span><span class="o">.</span><span class="n">removeTab</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h5 id="sanpy.interface.sanpy_app.SanPyWindow.slot_detect" class="doc doc-heading">
<code class="highlight language-python"><span class="n">slot_detect</span><span class="p">(</span><span class="n">ba</span><span class="p">)</span></code>

<a href="#sanpy.interface.sanpy_app.SanPyWindow.slot_detect" class="headerlink" title="Permanent link">¤</a></h5>


  <div class="doc doc-contents ">
  
      <p>Respond to spike detection.</p>
<p>Usually comes from the sanpy.interface.bDetectionWidget</p>

      <details class="quote">
        <summary>Source code in <code>/Users/cudmore/Sites/SanPy/sanpy/interface/sanpy_app.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1267</span>
<span class="normal">1268</span>
<span class="normal">1269</span>
<span class="normal">1270</span>
<span class="normal">1271</span>
<span class="normal">1272</span>
<span class="normal">1273</span>
<span class="normal">1274</span>
<span class="normal">1275</span>
<span class="normal">1276</span>
<span class="normal">1277</span>
<span class="normal">1278</span>
<span class="normal">1279</span>
<span class="normal">1280</span>
<span class="normal">1281</span>
<span class="normal">1282</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">slot_detect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ba</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Respond to spike detection.</span>

<span class="sd">    Usually comes from the sanpy.interface.bDetectionWidget</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">setSpikeStatEvent</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">setSpikeStatEvent</span><span class="p">[</span><span class="s1">&#39;ba&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ba</span>
    <span class="n">setSpikeStatEvent</span><span class="p">[</span><span class="s2">&quot;spikeList&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># self.getSelectedSpikes()</span>
    <span class="n">setSpikeStatEvent</span><span class="p">[</span><span class="s2">&quot;colStr&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># colStr</span>
    <span class="n">setSpikeStatEvent</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># value</span>

    <span class="c1"># sweep number does not change</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">signalUpdateAnalysis</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">setSpikeStatEvent</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">slot_updateStatus</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Detected </span><span class="si">{</span><span class="n">ba</span><span class="o">.</span><span class="n">numSpikes</span><span class="si">}</span><span class="s2"> spikes&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h5 id="sanpy.interface.sanpy_app.SanPyWindow.slot_dockLocationChanged" class="doc doc-heading">
<code class="highlight language-python"><span class="n">slot_dockLocationChanged</span><span class="p">(</span><span class="n">dock</span><span class="p">,</span> <span class="n">area</span><span class="p">)</span></code>

<a href="#sanpy.interface.sanpy_app.SanPyWindow.slot_dockLocationChanged" class="headerlink" title="Permanent link">¤</a></h5>


  <div class="doc doc-contents ">
  
      <p>Top level dock changed</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>dock</code></td>
          <td>
                <code>xxx</code>
          </td>
          <td></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>area</code></td>
          <td>
                <code>enum QtCore.Qt.DockWidgetArea</code>
          </td>
          <td><p>Basically left/top/right/bottom.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>
      <p>Not triggered when user 'floats' a dock (See self.slot_topLevelChanged())</p>

      <details class="quote">
        <summary>Source code in <code>/Users/cudmore/Sites/SanPy/sanpy/interface/sanpy_app.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1353</span>
<span class="normal">1354</span>
<span class="normal">1355</span>
<span class="normal">1356</span>
<span class="normal">1357</span>
<span class="normal">1358</span>
<span class="normal">1359</span>
<span class="normal">1360</span>
<span class="normal">1361</span>
<span class="normal">1362</span>
<span class="normal">1363</span>
<span class="normal">1364</span>
<span class="normal">1365</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">slot_dockLocationChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dock</span><span class="p">,</span> <span class="n">area</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Top level dock changed</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    dock : xxx</span>
<span class="sd">    area : enum QtCore.Qt.DockWidgetArea</span>
<span class="sd">        Basically left/top/right/bottom.</span>

<span class="sd">    Not triggered when user &#39;floats&#39; a dock (See self.slot_topLevelChanged())</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;not implemented, dock:&quot;</span><span class="si">{</span><span class="n">dock</span><span class="o">.</span><span class="n">windowTitle</span><span class="p">()</span><span class="si">}</span><span class="s1">&quot; area enum: </span><span class="si">{</span><span class="n">area</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="k">return</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h5 id="sanpy.interface.sanpy_app.SanPyWindow.slot_fileTableClicked" class="doc doc-heading">
<code class="highlight language-python"><span class="n">slot_fileTableClicked</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">rowDict</span><span class="p">,</span> <span class="n">selectingAgain</span><span class="p">)</span></code>

<a href="#sanpy.interface.sanpy_app.SanPyWindow.slot_fileTableClicked" class="headerlink" title="Permanent link">¤</a></h5>


  <div class="doc doc-contents ">
  
      <p>Respond to selections in file table.</p>

      <details class="quote">
        <summary>Source code in <code>/Users/cudmore/Sites/SanPy/sanpy/interface/sanpy_app.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span>
<span class="normal">551</span>
<span class="normal">552</span>
<span class="normal">553</span>
<span class="normal">554</span>
<span class="normal">555</span>
<span class="normal">556</span>
<span class="normal">557</span>
<span class="normal">558</span>
<span class="normal">559</span>
<span class="normal">560</span>
<span class="normal">561</span>
<span class="normal">562</span>
<span class="normal">563</span>
<span class="normal">564</span>
<span class="normal">565</span>
<span class="normal">566</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">slot_fileTableClicked</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">rowDict</span><span class="p">,</span> <span class="n">selectingAgain</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Respond to selections in file table.&quot;&quot;&quot;</span>

<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    row (int):</span>
<span class="sd">    rowDict (dict):</span>
<span class="sd">    selectingAgain (bool): True if row was already selected</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">selectingAgain</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slot_updateStatus</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Refreshing file &quot;</span><span class="si">{</span><span class="n">rowDict</span><span class="p">[</span><span class="s2">&quot;File&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slot_updateStatus</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Loading file &quot;</span><span class="si">{</span><span class="n">rowDict</span><span class="p">[</span><span class="s2">&quot;File&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1">&quot; ... please wait&#39;</span><span class="p">)</span>

    <span class="c1"># TODO: try and remove this</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">startSec</span> <span class="o">=</span> <span class="n">rowDict</span><span class="p">[</span><span class="s2">&quot;Start(s)&quot;</span><span class="p">]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">stopSec</span> <span class="o">=</span> <span class="n">rowDict</span><span class="p">[</span><span class="s2">&quot;Stop(s)&quot;</span><span class="p">]</span>

    <span class="c1"># This will load if necc, otherwise just fetch a pointer</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">myAnalysisDir</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">ba</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">myAnalysisDir</span><span class="o">.</span><span class="n">getAnalysis</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>  <span class="c1"># if None then problem loading</span>

        <span class="k">if</span> <span class="n">ba</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">signalSwitchFile</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">ba</span><span class="p">,</span> <span class="n">rowDict</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">selectingAgain</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">slot_updateStatus</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s1">&#39;Loaded file &quot;</span><span class="si">{</span><span class="n">ba</span><span class="o">.</span><span class="n">fileLoader</span><span class="o">.</span><span class="n">filename</span><span class="si">}</span><span class="s1">&quot;&#39;</span>
                <span class="p">)</span>  <span class="c1"># this will load ba if necc</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h5 id="sanpy.interface.sanpy_app.SanPyWindow.slot_loadFolder" class="doc doc-heading">
<code class="highlight language-python"><span class="n">slot_loadFolder</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">folderDepth</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>

<a href="#sanpy.interface.sanpy_app.SanPyWindow.slot_loadFolder" class="headerlink" title="Permanent link">¤</a></h5>


  <div class="doc doc-contents ">
  
      <p>Load a folder of raw data files.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>path</code></td>
          <td>
                <code>str</code>
          </td>
          <td></td>
          <td>
                <code>&#39;&#39;</code>
          </td>
        </tr>
        <tr>
          <td><code>folderDepth</code></td>
          <td>
                <code>int or None</code>
          </td>
          <td></td>
          <td>
                <code>None</code>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>/Users/cudmore/Sites/SanPy/sanpy/interface/sanpy_app.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">slot_loadFolder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">folderDepth</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load a folder of raw data files.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    path : str</span>
<span class="sd">    folderDepth : int or None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">folderDepth</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># get the depth from file list widget</span>
        <span class="n">folderDepth</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_fileListWidget</span><span class="o">.</span><span class="n">getDepth</span><span class="p">()</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Loading depth:</span><span class="si">{</span><span class="n">folderDepth</span><span class="si">}</span><span class="s2"> path: </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># if folder is already loaded, ask to save</span>
    <span class="n">acceptAndContinue</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_promptIfDirty</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">acceptAndContinue</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="c1"># ask user for folder</span>
    <span class="k">if</span> <span class="n">path</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="nb">bool</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">path</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span>
            <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QFileDialog</span><span class="o">.</span><span class="n">getExistingDirectory</span><span class="p">(</span>
                <span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;Select Directory With Recordings&quot;</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
    <span class="k">elif</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;    Did not load path &quot;</span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">path</span>  <span class="c1"># path to loaded bAnalysisDir folder</span>

    <span class="c1"># logger.info(f&#39;Loading path: {path}&#39;)</span>

    <span class="c1"># will create/load hd5 file for folder</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">myAnalysisDir</span> <span class="o">=</span> <span class="n">sanpy</span><span class="o">.</span><span class="n">analysisDir</span><span class="p">(</span>
        <span class="n">path</span><span class="p">,</span> <span class="n">folderDepth</span><span class="o">=</span><span class="n">folderDepth</span><span class="p">,</span> <span class="n">myApp</span><span class="o">=</span><span class="bp">self</span>
    <span class="p">)</span>

    <span class="c1"># set myAnalysisDir to file list model</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">myModel</span> <span class="o">=</span> <span class="n">sanpy</span><span class="o">.</span><span class="n">interface</span><span class="o">.</span><span class="n">bFileTable</span><span class="o">.</span><span class="n">pandasModel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">myAnalysisDir</span><span class="p">)</span>
    <span class="c1"># self.myModel.signalMyDataChanged.connect(self.slot_dataChanged)</span>
    <span class="c1"># self.myModel.signalMyDataChanged.connect(self.myDetectionWidget.slot_dataChanged)</span>

    <span class="c1"># try:</span>
    <span class="k">if</span> <span class="mi">1</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fileListWidget</span><span class="o">.</span><span class="n">mySetModel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">myModel</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">myModel</span><span class="o">.</span><span class="n">signalMyDataChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">myDetectionWidget</span><span class="o">.</span><span class="n">slot_dataChanged</span>
        <span class="p">)</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    except (AttributeError) as e:</span>
<span class="sd">        # needed when we call loadFolder from __init__</span>
<span class="sd">        # logger.warning(&#39;OK: no tableView during load folder&#39;)</span>
<span class="sd">        pass</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># set window title</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">):</span>
        <span class="n">windowTitle</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;SanPy: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">windowTitle</span> <span class="o">=</span> <span class="s2">&quot;SanPy&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="n">windowTitle</span><span class="p">)</span>

    <span class="c1"># add to preferences recent folders</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">configDict</span><span class="o">.</span><span class="n">addFolder</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h5 id="sanpy.interface.sanpy_app.SanPyWindow.slot_selectSweep" class="doc doc-heading">
<code class="highlight language-python"><span class="n">slot_selectSweep</span><span class="p">(</span><span class="n">ba</span><span class="p">,</span> <span class="n">sweepNumber</span><span class="p">)</span></code>

<a href="#sanpy.interface.sanpy_app.SanPyWindow.slot_selectSweep" class="headerlink" title="Permanent link">¤</a></h5>


  <div class="doc doc-contents ">
  
      <p>Set view to new sweep.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>ba</code></td>
          <td>
                <code><span title="sanpy.interface.preferences">sanpy</span>.<span title="sanpy.interface.preferences.bAnalysis">bAnalysis</span></code>
          </td>
          <td></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>sweepNumber</code></td>
          <td>
                <code>int</code>
          </td>
          <td></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>/Users/cudmore/Sites/SanPy/sanpy/interface/sanpy_app.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1226</span>
<span class="normal">1227</span>
<span class="normal">1228</span>
<span class="normal">1229</span>
<span class="normal">1230</span>
<span class="normal">1231</span>
<span class="normal">1232</span>
<span class="normal">1233</span>
<span class="normal">1234</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">slot_selectSweep</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ba</span><span class="p">,</span> <span class="n">sweepNumber</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set view to new sweep.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    ba : sanpy.bAnalysis</span>
<span class="sd">    sweepNumber : int</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">signalSelectSweep</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">ba</span><span class="p">,</span> <span class="n">sweepNumber</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h5 id="sanpy.interface.sanpy_app.SanPyWindow.slot_topLevelChanged" class="doc doc-heading">
<code class="highlight language-python"><span class="n">slot_topLevelChanged</span><span class="p">(</span><span class="n">topLevel</span><span class="p">)</span></code>

<a href="#sanpy.interface.sanpy_app.SanPyWindow.slot_topLevelChanged" class="headerlink" title="Permanent link">¤</a></h5>


  <div class="doc doc-contents ">
  
      <p>topLevel (bool): True if the dock widget is now floating; otherwise False.</p>
<p>This is triggered twice, once while dragging and once when finished</p>

      <details class="quote">
        <summary>Source code in <code>/Users/cudmore/Sites/SanPy/sanpy/interface/sanpy_app.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1371</span>
<span class="normal">1372</span>
<span class="normal">1373</span>
<span class="normal">1374</span>
<span class="normal">1375</span>
<span class="normal">1376</span>
<span class="normal">1377</span>
<span class="normal">1378</span>
<span class="normal">1379</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">slot_topLevelChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">topLevel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    topLevel (bool): True if the dock widget is now floating; otherwise False.</span>

<span class="sd">    This is triggered twice, once while dragging and once when finished</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">sender</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sender</span><span class="p">()</span>  <span class="c1"># PyQt5.QtWidgets.QDockWidget</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;topLevel:</span><span class="si">{</span><span class="n">topLevel</span><span class="si">}</span><span class="s2"> sender:</span><span class="si">{</span><span class="n">sender</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h5 id="sanpy.interface.sanpy_app.SanPyWindow.slot_updateAnalysis" class="doc doc-heading">
<code class="highlight language-python"><span class="n">slot_updateAnalysis</span><span class="p">(</span><span class="n">sDict</span><span class="p">)</span></code>

<a href="#sanpy.interface.sanpy_app.SanPyWindow.slot_updateAnalysis" class="headerlink" title="Permanent link">¤</a></h5>


  <div class="doc doc-contents ">
  
      <p>Respond to both detect and user setting columns in ba.</p>
<p>sDict : dict
    setSpikeStatEvent = {}
    setSpikeStatEvent['ba'] = self.ba
    setSpikeStatEvent["spikeList"] = self.getSelectedSpikes()
    setSpikeStatEvent["colStr"] = colStr
    setSpikeStatEvent["value"] = value</p>

      <details class="quote">
        <summary>Source code in <code>/Users/cudmore/Sites/SanPy/sanpy/interface/sanpy_app.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1192</span>
<span class="normal">1193</span>
<span class="normal">1194</span>
<span class="normal">1195</span>
<span class="normal">1196</span>
<span class="normal">1197</span>
<span class="normal">1198</span>
<span class="normal">1199</span>
<span class="normal">1200</span>
<span class="normal">1201</span>
<span class="normal">1202</span>
<span class="normal">1203</span>
<span class="normal">1204</span>
<span class="normal">1205</span>
<span class="normal">1206</span>
<span class="normal">1207</span>
<span class="normal">1208</span>
<span class="normal">1209</span>
<span class="normal">1210</span>
<span class="normal">1211</span>
<span class="normal">1212</span>
<span class="normal">1213</span>
<span class="normal">1214</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">slot_updateAnalysis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sDict</span> <span class="p">:</span> <span class="nb">dict</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Respond to both detect and user setting columns in ba.</span>

<span class="sd">    sDict : dict</span>
<span class="sd">        setSpikeStatEvent = {}</span>
<span class="sd">        setSpikeStatEvent[&#39;ba&#39;] = self.ba</span>
<span class="sd">        setSpikeStatEvent[&quot;spikeList&quot;] = self.getSelectedSpikes()</span>
<span class="sd">        setSpikeStatEvent[&quot;colStr&quot;] = colStr</span>
<span class="sd">        setSpikeStatEvent[&quot;value&quot;] = value</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

    <span class="c1"># do the actual update</span>
    <span class="n">ba</span> <span class="o">=</span> <span class="n">sDict</span><span class="p">[</span><span class="s1">&#39;ba&#39;</span><span class="p">]</span>
    <span class="n">spikeList</span> <span class="o">=</span> <span class="n">sDict</span><span class="p">[</span><span class="s1">&#39;spikeList&#39;</span><span class="p">]</span>
    <span class="n">colStr</span> <span class="o">=</span> <span class="n">sDict</span><span class="p">[</span><span class="s1">&#39;colStr&#39;</span><span class="p">]</span>
    <span class="n">value</span> <span class="o">=</span> <span class="n">sDict</span><span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">spikeList</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">colStr</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;setting backend: </span><span class="si">{</span><span class="n">spikeList</span><span class="si">}</span><span class="s1"> colStr: </span><span class="si">{</span><span class="n">colStr</span><span class="si">}</span><span class="s1"> to value:</span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">ba</span><span class="o">.</span><span class="n">setSpikeStat</span><span class="p">(</span><span class="n">spikeList</span><span class="p">,</span> <span class="n">colStr</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">signalUpdateAnalysis</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">sDict</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h5 id="sanpy.interface.sanpy_app.SanPyWindow.slot_updateStatus" class="doc doc-heading">
<code class="highlight language-python"><span class="n">slot_updateStatus</span><span class="p">(</span><span class="n">text</span><span class="p">)</span></code>

<a href="#sanpy.interface.sanpy_app.SanPyWindow.slot_updateStatus" class="headerlink" title="Permanent link">¤</a></h5>


  <div class="doc doc-contents ">
  
      <p>Update the bottom status bar with new str</p>

      <details class="quote">
        <summary>Source code in <code>/Users/cudmore/Sites/SanPy/sanpy/interface/sanpy_app.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1242</span>
<span class="normal">1243</span>
<span class="normal">1244</span>
<span class="normal">1245</span>
<span class="normal">1246</span>
<span class="normal">1247</span>
<span class="normal">1248</span>
<span class="normal">1249</span>
<span class="normal">1250</span>
<span class="normal">1251</span>
<span class="normal">1252</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">slot_updateStatus</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Update the bottom status bar with new str&quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>

    <span class="c1"># having trouble with an immediate update?</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">statusBar</span><span class="o">.</span><span class="n">showMessage</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">statusBar</span><span class="o">.</span><span class="n">repaint</span><span class="p">()</span>
    <span class="c1"># self.statusBar.update()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">repaint</span><span class="p">()</span>
    <span class="c1"># self.update()</span>
    <span class="n">QtWidgets</span><span class="o">.</span><span class="n">qApp</span><span class="o">.</span><span class="n">processEvents</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>

<div class="doc doc-object doc-function">



<h5 id="sanpy.interface.sanpy_app.SanPyWindow.toggleInterface" class="doc doc-heading">
<code class="highlight language-python"><span class="n">toggleInterface</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">on</span><span class="p">)</span></code>

<a href="#sanpy.interface.sanpy_app.SanPyWindow.toggleInterface" class="headerlink" title="Permanent link">¤</a></h5>


  <div class="doc doc-contents ">
  
      <p>Toggle named interface widgets show and hide.</p>

  <p><strong>Parameters:</strong></p>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Description</th>
        <th>Default</th>
      </tr>
    </thead>
    <tbody>
        <tr>
          <td><code>name</code></td>
          <td>
                <code>str</code>
          </td>
          <td><p>Name of the widget</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
        <tr>
          <td><code>on</code></td>
          <td>
                <code>bool</code>
          </td>
          <td><p>If True then show, otherwise hide.</p></td>
          <td>
              <em>required</em>
          </td>
        </tr>
    </tbody>
  </table>

      <details class="quote">
        <summary>Source code in <code>/Users/cudmore/Sites/SanPy/sanpy/interface/sanpy_app.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 977</span>
<span class="normal"> 978</span>
<span class="normal"> 979</span>
<span class="normal"> 980</span>
<span class="normal"> 981</span>
<span class="normal"> 982</span>
<span class="normal"> 983</span>
<span class="normal"> 984</span>
<span class="normal"> 985</span>
<span class="normal"> 986</span>
<span class="normal"> 987</span>
<span class="normal"> 988</span>
<span class="normal"> 989</span>
<span class="normal"> 990</span>
<span class="normal"> 991</span>
<span class="normal"> 992</span>
<span class="normal"> 993</span>
<span class="normal"> 994</span>
<span class="normal"> 995</span>
<span class="normal"> 996</span>
<span class="normal"> 997</span>
<span class="normal"> 998</span>
<span class="normal"> 999</span>
<span class="normal">1000</span>
<span class="normal">1001</span>
<span class="normal">1002</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">toggleInterface</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">on</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Toggle named interface widgets show and hide.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    name : str</span>
<span class="sd">        Name of the widget</span>
<span class="sd">    on : bool</span>
<span class="sd">        If True then show, otherwise hide.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;File Panel&quot;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_fileListWidget</span><span class="o">.</span><span class="n">setVisible</span><span class="p">(</span><span class="n">on</span><span class="p">)</span>
        <span class="c1"># if on:</span>
        <span class="c1">#     self.fileDock.show()</span>
        <span class="c1"># else:</span>
        <span class="c1">#     self.fileDock.hide()</span>
    <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;Plugins 1&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">on</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pluginDock1</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pluginDock1</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;Plugins 2&quot;</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">on</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pluginDock2</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pluginDock2</span><span class="o">.</span><span class="n">hide</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>
<h2 id="sanpy.interface.sanpy_app-functions">Functions<a href="#sanpy.interface.sanpy_app-functions" class="headerlink" title="Permanent link">¤</a></h2>

<div class="doc doc-object doc-function">



<h3 id="sanpy.interface.sanpy_app.main" class="doc doc-heading">
<code class="highlight language-python"><span class="n">main</span><span class="p">()</span></code>

<a href="#sanpy.interface.sanpy_app.main" class="headerlink" title="Permanent link">¤</a></h3>


  <div class="doc doc-contents ">
  
      <p>Main entry point for the SanPy desktop app.</p>
<p>Configured in setup.py</p>

      <details class="quote">
        <summary>Source code in <code>/Users/cudmore/Sites/SanPy/sanpy/interface/sanpy_app.py</code></summary>
        <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1485</span>
<span class="normal">1486</span>
<span class="normal">1487</span>
<span class="normal">1488</span>
<span class="normal">1489</span>
<span class="normal">1490</span>
<span class="normal">1491</span>
<span class="normal">1492</span>
<span class="normal">1493</span>
<span class="normal">1494</span>
<span class="normal">1495</span>
<span class="normal">1496</span>
<span class="normal">1497</span>
<span class="normal">1498</span>
<span class="normal">1499</span>
<span class="normal">1500</span>
<span class="normal">1501</span>
<span class="normal">1502</span>
<span class="normal">1503</span>
<span class="normal">1504</span>
<span class="normal">1505</span>
<span class="normal">1506</span>
<span class="normal">1507</span>
<span class="normal">1508</span>
<span class="normal">1509</span>
<span class="normal">1510</span>
<span class="normal">1511</span>
<span class="normal">1512</span>
<span class="normal">1513</span>
<span class="normal">1514</span>
<span class="normal">1515</span>
<span class="normal">1516</span>
<span class="normal">1517</span>
<span class="normal">1518</span>
<span class="normal">1519</span>
<span class="normal">1520</span>
<span class="normal">1521</span>
<span class="normal">1522</span>
<span class="normal">1523</span>
<span class="normal">1524</span>
<span class="normal">1525</span>
<span class="normal">1526</span>
<span class="normal">1527</span>
<span class="normal">1528</span>
<span class="normal">1529</span>
<span class="normal">1530</span>
<span class="normal">1531</span>
<span class="normal">1532</span>
<span class="normal">1533</span>
<span class="normal">1534</span>
<span class="normal">1535</span>
<span class="normal">1536</span>
<span class="normal">1537</span>
<span class="normal">1538</span>
<span class="normal">1539</span>
<span class="normal">1540</span>
<span class="normal">1541</span>
<span class="normal">1542</span>
<span class="normal">1543</span>
<span class="normal">1544</span>
<span class="normal">1545</span>
<span class="normal">1546</span>
<span class="normal">1547</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Main entry point for the SanPy desktop app.</span>

<span class="sd">    Configured in setup.py</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Starting sanpy_app.py in main()&quot;</span><span class="p">)</span>
    <span class="c1"># date_time_str = datetime.now().strftime(&quot;%Y-%m-%d %H:%M:%S&quot;)</span>
    <span class="c1"># logger.info(f&#39;    {date_time_str}&#39;)</span>

    <span class="c1"># _version = _getVersionInfo()</span>
    <span class="c1"># for k,v in _version.items():</span>
    <span class="c1">#     logger.info(f&#39;{k} {v}&#39;)</span>

<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    logger.info(f&#39;    Python version is {platform.python_version()}&#39;)</span>
<span class="sd">    logger.info(f&#39;    Python platform is {platform.platform()}&#39;)</span>

<span class="sd">    # when using import PyQt5</span>
<span class="sd">    #logger.info(f&quot;    PyQt version is {QtCore.QT_VERSION_STR}&quot;)</span>
<span class="sd">    # when using import qtpy</span>
<span class="sd">    logger.info(f&quot;    PyQt version is {QtCore.__version__}&quot;)</span>

<span class="sd">    bundle_dir = sanpy._util.getBundledDir()</span>
<span class="sd">    logger.info(f&#39;    bundle_dir is &quot;{bundle_dir}&quot;&#39;)</span>

<span class="sd">    _logFilePath = sanpy.sanpyLogger.getLoggerFile()</span>
<span class="sd">    logger.info(f&quot;    logging to file {_logFilePath}&quot;)</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="c1"># for qdarkstyle</span>
    <span class="c1"># os.environ[&#39;PYQTGRAPH_QT_LIB&#39;] = &#39;PyQt5&#39;</span>

    <span class="n">app</span> <span class="o">=</span> <span class="n">QtWidgets</span><span class="o">.</span><span class="n">QApplication</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">)</span>

    <span class="n">app</span><span class="o">.</span><span class="n">setQuitOnLastWindowClosed</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># for manuscript we need to allow user to set light/dark theme</span>
    <span class="c1"># was this</span>
    <span class="c1"># v1</span>
    <span class="c1"># app.setStyleSheet(qdarkstyle.load_stylesheet(qt_api=os.environ[&#39;PYQTGRAPH_QT_LIB&#39;]))</span>
    <span class="c1"># v2</span>
    <span class="n">qdarktheme</span><span class="o">.</span><span class="n">setup_theme</span><span class="p">()</span>

    <span class="c1"># appIconPath = os.path.join(bundle_dir, &#39;interface/icons/sanpy_transparent.png&#39;)</span>
    <span class="n">bundle_dir</span> <span class="o">=</span> <span class="n">sanpy</span><span class="o">.</span><span class="n">_util</span><span class="o">.</span><span class="n">getBundledDir</span><span class="p">()</span>
    <span class="n">appIconPath</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">bundle_dir</span><span class="p">)</span> <span class="o">/</span> <span class="s2">&quot;interface&quot;</span> <span class="o">/</span> <span class="s2">&quot;icons&quot;</span> <span class="o">/</span> <span class="s2">&quot;sanpy_transparent.png&quot;</span>
    <span class="p">)</span>
    <span class="n">appIconPathStr</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">appIconPath</span><span class="p">)</span>
    <span class="c1"># logger.info(f&#39;appIconPath is &quot;{appIconPath}&quot;&#39;)</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">appIconPathStr</span><span class="p">):</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;  app.setWindowIcon with: &quot;</span><span class="si">{</span><span class="n">appIconPath</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
        <span class="n">app</span><span class="o">.</span><span class="n">setWindowIcon</span><span class="p">(</span><span class="n">QtGui</span><span class="o">.</span><span class="n">QIcon</span><span class="p">(</span><span class="n">appIconPathStr</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;    Did not find appIconPath: </span><span class="si">{</span><span class="n">appIconPathStr</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">w</span> <span class="o">=</span> <span class="n">SanPyWindow</span><span class="p">()</span>

    <span class="n">w</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
    <span class="n">w</span><span class="o">.</span><span class="n">raise_</span><span class="p">()</span>  <span class="c1"># bring to front, raise is a python keyword</span>
    <span class="n">w</span><span class="o">.</span><span class="n">activateWindow</span><span class="p">()</span>  <span class="c1"># bring to front</span>

    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">exec_</span><span class="p">())</span>
</code></pre></div></td></tr></table></div>
      </details>
  </div>

</div>



  </div>

  </div>

</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        All material is Copyright 2011-2023 Robert H. Cudmore
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.instant"], "search": "../../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.51198bba.min.js"></script>
      
    
  </body>
</html>